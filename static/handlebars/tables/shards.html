<script id="shards_container-template" type="text/x-handlebars-template">
    <h2 class="title">Shard status</h2>
    <div class="shard-status"></div>
    <h2 class="title">Sharding settings</h2>
    <div class="edit-shards"></div>
    <h2 class="title">Data repartition</h2>
    <div id="data_repartition-container" class="data_repartition-container">
        <!--
        <div class="shard-graph">
            <svg class="shard-diagram" width="700" height="350">
                <text x="300" y="150" class="loading_text-diagram">Loading data...</text>
            </svg>
        </div>
        -->
    </div>
</script>

<script id="view_shards-template" type="text/x-handlebars-template">
    <div class="cannot_shard-alert alert alert-error"></div>
    <button class="btn edit">Edit</button>
    <p class="icon_paragraph"><span class="big">{{num_shards}}</span> <span class="shard_text">{{pluralize_noun "shard" num_shards}}</span></p> 
</script>


<script id="edit_shards-template" type="text/x-handlebars-template">
    <div class="cannot_shard-alert alert alert-error"></div>
    <button class="btn cancel">&times;</button>
    <button class="btn rebalance">Rebalance</button>
    <p class="icon_paragraph">
        <input class="num-shards" type="text" value="{{num_shards}}" />
        <span class="shard_text">{{pluralize_noun "shard" num_shards}}</span>
    </p>
    <p class="max-value">max shards: {{max_shards}}</p>
</script>


<script id="edit_shards-feedback-template" type="text/x-handlebars-template">
    <p>{{this}}</p>
</script>

<script id="alert_shard-template" type="text/x-handlebars-template">
    {{#if too_many_shards}}
    The number of shards ({{num_shards}}) cannot exceed {{max_num_shards}}.
    {{/if}}
    {{#if not_int}}
    The number of shards must be an integer.
    {{/if}}
    {{#if need_at_least_one_shard}}
    The number of shards must be at least one.
    {{/if}}
    {{#if server_error}}
    The server could not update the shards. Error:
    <pre>{{error.msg}}</pre>
    {{/if}}

</script>

<script id="edit_shards-ajax_error-template" type="text/x-handlebars-template">
    Sorry, something went wront with the ajax request. Please refresh and try again.
</script>

<script id="data_repartition-template" type="text/x-handlebars-template">
</script>

<script id="shard_settings-template" type="text/x-handlebars-template">
    <div class="alert alert-error settings_alert"></div>
    {{#if editable}}
        <div class="cannot_shard-alert alert alert-error"></div>
        <button class="btn cancel">&times;</button>
        <button class="btn rebalance">Rebalance</button>
        <p class="icon_paragraph">
            <input id="num_shards" class="num-shards" type="text" value="{{num_shards}}"/>
            <span class="shard_text">{{pluralize_noun "shard" num_shards}}</span>
        </p>
        <p class="max-value">max shards: {{max_shards}}</p>
    {{else}}
        <div class="cannot_shard-alert alert alert-error"></div>
        <button class="btn edit">Edit</button>
        <p class="icon_paragraph"><span class="big">{{num_shards}}</span> <span class="shard_text">{{pluralize_noun "shard" num_shards}}</span></p> 
    {{/if}}
</script>

<script id="shard_status-template" type="text/x-handlebars-template">
    {{#if operation_active}}
        <div class="progress-status">
            <div class="stages">
                {{#if starting}}
                    <p>Started</p>
                {{/if}}
                {{#if processing}}
                    <p class="completed">Started</p>
                    <p>Sharding</p>
                {{/if}}
                {{#if finished}}
                    <p class="completed">Started</p>
                    <p class="completed">Sharded</p>
                {{/if}}
            </div>
            {{#if starting}}
                <p>0/{{new_value}} shards completed</p>
            {{else}}
                <p>{{current_value}}/{{max_value}} shards completed</p>
            {{/if}}
            <div class="progress"><div class="bar" style="width:{{#if starting}}0{{else}}{{percent_complete}}{{/if}}%"></div></div>
        </div>
    {{else}}
        <p><span class="big">{{current_value}}/{{max_value}}</span> shards available</p>
    {{/if}}
</script>

<script id="shards-reason_cannot_shard-template" type="text/x-handlebars-template">
    {{#if machine_down}}
        Please resolve pending issues before sharding.
    {{/if}}
    {{#if unsatisfiable_goals}}
        Please resolve pending issues before sharding.
    {{/if}}
</script>
