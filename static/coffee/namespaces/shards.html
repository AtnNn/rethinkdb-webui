<script id="namespace_view-sharding-template" type="text/x-handlebars-template">
    <table class="shards table">
        <tbody>
        </tbody>
    </table>
    <p><a class="edit" href="#">Change sharding scheme</a></p>
</script>

<script id="namespace_view-shard-template" type="text/x-handlebars-template">
    <td class="name"><h4>{{name}}</h4></td>
    <td class="status">
        <div class="datacenter-list"></div>
    </td>
</script>

<script id="namespace_view-shard_datacenter_list-template" type="text/x-handlebars-template">
    <div class="datacenters"></div>
</script>

<script id="namespace_view-shard_datacenter-template" type="text/x-handlebars-template">
    <div class="row header">
        <div class="expanded arrow"></div>
        <div class="datacenter summary"></div>
    </div>
    <div class="machine-list"></div>
    <div class="divider"></div>
</script>

<script id="namespace_view-shard_datacenter-summary-template" type="text/x-handlebars-template">
    <p class="status">{{humanize_datacenter_reachability status}}</p>
    <h4 class="datacenter name"><span class="element-type label label-inverse">Datacenter</span><a href="#datacenters/{{id}}">{{name}}</a></h4>
</script>

<script id="namespace_view-shard_machine_list-template" type="text/x-handlebars-template">
    <ul class="machines"></ul>
</script>

<script id="namespace_view-shard_machine-template" type="text/x-handlebars-template">
    {{#if is_master}}
        <span class="master label label-info">Master machine</span>
    {{else}}
        <span class="secondary label label-info">Secondary machine</span>
    {{/if}}
    <a class="machine name" href="#machines/{{id}}">{{name}}</a>
    {{#unless is_master}}
        <a class="change-machine" href="#" rel="popover" data-title="Change machine for this shard"><i class="icon-edit"></i></a>
        <a class="make-master" href="#">make master</a>
    {{/unless}}
    <p class="status">
        {{humanize_machine_reachability status}}{{#if status.reachable}}{{! > backfill_progress_summary}}{{/if}}
        {{#if status.reachable}}
            {{> backfill_progress_summary}}
        {{/if}}
    </p>
    {{> backfill_progress_details}}
</script>
<script id="namespace_view-shard_machine-assign_machine_popover-template" type="text/x-handlebars-template">
    <div class="namespace-shard-assign-machine">
        <select class="chosen-dropdown" data-placeholder="Choose a different machine">
            <option></option>
            {{#each available_machines}}
                <option value="{{id}}">{{name}}</option>
            {{/each}}
        </select>
        <a class="btn btn-primary change-machine" data-loading-text="Loading..." href="#">Change machine</a>
    </div>
</script>

<script id="modify_shards_modal-template" type="text/x-handlebars-template">
    <form class="form">
        <div class="sharding-scheme">
            <h4>Sharding settings:</h4>
            <table class="shards table">
                <tbody>
                </tbody>
            </table>
            {{#if suggest_shards_view}}
            <div class="shard-suggester clearfix">
                <h4>Suggest sharding scheme:</h4>
                <div class="shard_suggest_elements">
                    <label for="replicas">Number of shards:</label>
                    <input name="num_shards" type="text" value="{{new_shard_count}}"/>
                    <button class="btn btn-compute-shards-suggestion" data-loading-text="Calculating...">Suggest</button>
                </div>
                <p class="current">Current shards: {{current_shards_count}}</p>
                <a id="cancel_shards_suggester_btn" href="#">Cancel</a>
            </div>
            {{else}}
            <p class="suggest_shards_pathway"><a id="suggest_shards_btn" href="#">Suggest shards</a></p>
            {{/if}}
        </div>
        <div class="sharding-plan"></div>
    </form>
</script>

<script id="modify_shards-alert-template" type="text/x-handlebars-template">
    <div class="alert" data-alert="alert">
        <a class="close" href="#">&times;</a>
        <p>You successfully modified the shard plan. Machine assignments for this namespace have been reset.</p>
    </div>
</script>

<script id="modify_shards_modal-shard-template" type="text/x-handlebars-template">
    {{#with shard}}
    <td class="name"><h4>{{name}}</h4></td>
    <td class="status">
        <!-- TODO fake -->
        <p>N rows in the shard</p>
    </td>
    <td class="actions">
        <p>
            (<a href="#" class="split" data-index="{{index}}">split</a>)
            {{#if notlast}}
            (<a href="#" class="merge" data-index="{{index}}">merge with next</a>)
            {{/if}}
        </p>
    </td>
    {{/with}}
</script>

<script id="modify_shards_modal-edit_shard-template" type="text/x-handlebars-template">
    <td class="name">
        {{#with shard}}
        <h4>{{name}} </h4>
        {{/with}}
    </td>
    <td class="status" colspan="2">
        <!-- TODO fake -->
        <p>4 of 5 replicas live</p>
        <p>50.3 GB of data in this shard</p>
        <div class="action">
            {{#if splitting}}
            <label for="splitpoint">
                <p>Split point:</p>
            </label>
            <input class="small" name="splitpoint" type="text" />
            <a href="#" class="btn commit_split primary">Split</a>
            <a href="#" class="btn cancel_split secondary">Cancel</a>
            {{/if}}
            {{#if merging}}
            <p>
                <a href="#" class="btn commit_merge primary">Yes</a>
                <a href="#" class="btn cancel_merge secondary">No</a>
                Are you sure you want to merge these shards?
            </p>
            {{/if}}
        </div>
    </td>
</script>

