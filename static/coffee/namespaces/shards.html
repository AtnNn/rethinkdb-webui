<script id="shards_container-template" type="text/x-handlebars-template">
    <div class="user-alert-space"></div>
    <h3>Shards for this table</h3>
    <div class="status">
        <div class="change_shards_container">
            <a class="close-change_shards" href="#">&times;</a>
            <button class="btn change_shards-btn" data-loading-text="Sharding...">Change</button>
            <input class="num_shards" id="new_num_shards" name="num_shards" type="text" value="{{num_shards}}"/>
            <p>Number of shards:</p>
        </div>
        <button class="btn" id="show-change_shards-link">Change number of shard</button>
        <p>
        {{#if no_shard}}
        This table has not been sharded.
        {{else}}
        This table currently contains {{num_shards}} {{pluralize_noun "shard" num_shards}}
        {{/if}}
        </p>
    </div>
    
    <div class="data_repartition-container"></div>
</script>

<script id="change_shards-alert_error-template" type="text/x-handlebars-template">
    <div class="alert alert-error">
        <a class="close" href="#">&times;</a>
        <p>{{error}}</p>
    </div>
</script>

<script id="change_shards-success-alert-template" type="text/x-handlebars-template">
    <div class="alert" data-alert="alert">
        <a class="close" href="#">&times;</a>
        <p>You successfully modified the number of shards.</p> 
    </div>
</script>

<script id="rebalance_shards-success-alert-template" type="text/x-handlebars-template">
    <div class="alert" data-alert="alert">
        <a class="close" href="#">&times;</a>
        <p>You successfully rebalanced the shards.</p> 
    </div>
</script>

<script id="change_shards-fail-alert-template" type="text/x-handlebars-template">
    <div class="alert" data-alert="alert alert-error">
        <a class="close" href="#">&times;</a>
        <p>The server returned an error. Please try again.</p> 
    </div>
</script>

<script id="data_repartition-template" type="text/x-handlebars-template">
    <h3 class="title">Data repartition</h3>

    {{#if has_shards}}
        {{#if numerous_shards}}
            <div class="data_repartition-graph">
                <svg class="data_repartition-diagram" width="700" height="350">
                    <text x="300" y="150" class="loading_text-diagram">Loading data...</text>
                </svg>
            </div>

            <div class="data_repartition-legend">
                <ul class="legend legend_left">
                    <li class="title-legend"><h4>More statistics</h4></li>

                    <li class="more_statistics">
                        This table has {{shards_length}} {{pluralize_noun "shard" shards_length}} and contains {{total_keys}} keys.
                    </li>
                    <li class="more_statistics">
                        {{#if max_keys}}
                        Biggest shard has {{max_keys}} keys
                        {{else}}
                        Loading stats for biggest shards
                        {{/if}}
                    </li>
                    <li class="more_statistics">
                        {{#if min_keys}}
                        Smallest shard has {{min_keys}} keys
                        {{else}}
                        Loading stats for smallest shards
                        {{/if}}
     
                    </li>
                </ul>
                <ul class="legend legend_right">
                    <li class="title-legend"><h4>Operations on shards</h4></li>
                    <li class="more_statistics">
                        <button class="btn rebalance_shards-link">Rebalance shards</button>
                    </li>
                </ul>
            </div>
     
        {{else}}
        <div class="two-panel-section">
            <div class="data_repartition-graph panel-left">
                <svg class="data_repartition-diagram" width="270" height="270">
                    <text x="100" y="135" class="loading_text-diagram">Loading data...</text>
                </svg>
            </div>
            <div class="data_repartition-legend panel-right">
                <ul class="legend">
                    <li class="title-legend"><h4>More statistics</h4></li>


                    <li class="more_statistics">
                        This table has {{shards_length}} {{pluralize_noun "shard" shards_length}} and contains {{total_keys}} keys.
                    </li>
                    <li class="more_statistics">
                        {{#if max_keys}}
                        Biggest shard has {{max_keys}} keys
                        {{else}}
                        Loading stats for biggest shards
                        {{/if}}
                    </li>
                    <li class="more_statistics">
                        {{#if min_keys}}
                        Smallest shard has {{min_keys}} keys
                        {{else}}
                        Loading stats for smallest shards
                        {{/if}}
     
                    </li>
                </ul>
                <ul class="legend">
                    <li class="title-legend"><h4>Operations on shards</h4></li>
                    <li class="more_statistics">
                        <button class="btn rebalance_shards-link">Rebalance shards</button>
                    </li>
                </ul>
            </div>
        </div>
        {{/if}}
    {{else}}
        <div class="two-panel-section">
            <div class="data_repartition-graph panel-left">
                <svg class="data_repartition-diagram" width="270" height="270">
                    <text x="100" y="135" class="loading_text-diagram">Loading data...</text>
                </svg>
            </div>
            <div class="data_repartition-legend panel-right">
                <ul class="legend">
                    <li class="title-legend"><h4>More statistics</h4></li>

                    <li class="more_statistics">
                    This table has one shard and contains {{total_keys}} keys.
                    </li>                   <li class="more_statistics">
                        Biggest shard has {{max_keys}} keys
                    </li>
                </ul>
                <ul class="legend">
                    <li class="title-legend"><h4>Operations on shards</h4></li>
                    <li class="more_statistics">
                        <button class="btn" disabled="disabled">Rebalance shards</button> (needs at least 2 shards)
                    </li>
                </ul>
            </div>
        </div>
        <p class="no-shard"></p>    
    {{/if}}
</script>



