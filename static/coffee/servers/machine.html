<script id="machine_view-container-template" type="text/x-handlebars-template">
    <div id="server-view">
        <div class="operations">
            <div class="dropdown">
                <button class="btn dropdown-toggle" data-toggle="dropdown">Operations</button>
                <ul class="dropdown-menu">
                    <li><a href="#" class="rename">Rename server</a></li>
                    <li><a href="#" class="change-datacenter">Change datacenter</a></li>
                    <li class="unassign-datacenter_li"><a href="#" class="unassign-datacenter">Unassign datacenter</a></li>
                </ul>
            </div>
        </div>
        <button class="btn show-data">Show data on this server</button>
        <div class="main_title"></div>
        <div id="user-alert-space"></div>
        <div class="section statistics">
            <h2 class="title">Statistics</h3>
            <div class="content row-fluid">
                <div class="span4 profile"></div>
                <div class="span8 performance-graph"></div>
            </div>
        </div>
        <div class="recent-log-entries"></div>
    </div>
</script>

<script id="machine_view_title-template" type="text/x-handlebars-template">
    <h1 class="title">Server overview for {{name}}</h1>
</script>

<script id="machine_view-ghost-template" type="text/x-handlebars-template">
    <h1>Error</h1>
    <p>This server has been previously killed but has not reconnected.<br/>
    Please kill the RethinkDB instance on this server.</p>
    <p>List of IPs: {{comma_separated_simple ips}}</p>
    <p></p>
</script>

<script id="machine_view_profile-template" type="text/x-handlebars-template">
    <div class="summary">
        <div class="stat-row first">
            <p class="availability"><span class="big">{{humanize_machine_reachability reachability}}</span></p>
        </div>
        <div class="stat-row">
            <p class="datacenter">
                {{#if assigned_to_datacenter}}
                    <span class="big">{{datacenter_name}} </span> datacenter
                {{else}}
                    <span class="big">Unassigned </span>datacenter
                {{/if}}
            </p>
        </div>
        <div class="stat-row">
            <p class="uptime"><span class="big">About {{uptime}} </span>uptime</p>
        </div>
        <div class="stat-row">
            <p class="ips"><span class="big">{{#if ips}}{{main_ip}}{{else}}N/A{{/if}} </span>IP address</p>
        </div>
    </div>
        <!-- Review and remove
            {{#unless stats_up_to_date}}
            <p>The stats displayed might not be up to date<br />
            (the server might be overload with queries).</p>
            {{/unless}}
        -->
</script>

<script id="machine_view_data-template" type="text/x-handlebars-template">
    <h3 class="title">Data on this server</h3>
    {{#unless data.namespaces}}
    <p>No data found on this server.</p>
    {{/unless}}
    {{#each data.namespaces}}
    <div class="namespace">
        <h4>Table <a href="/#tables/{{uuid}}">{{name}}</a>:</h4>
        <ul class="shard_ul">
            {{#each shards}}
            <li class="shard_li">
                <h4>Shard {{name}}</h4>
                {{#if keys}}
                <p>About {{keys}} keys</p>
                {{else}}
                <p>Loading number of keys...</p>
                {{/if}}
            </li>
            {{/each}}
        </ul>
    </div>
    {{/each}}
</script>

<script id="reason-set_secondary-need_replica-template" type="text/x-handlebars-template">
    You need a replica to replace this master, please <a href="#tables/{{namespace_id}}/replication">increase</a> your number of replicas.
</script>

<script id="reason-set_nothing-set_secondary_first-template" type="text/x-handlebars-template">
    First set this server as a secondary before removing all responsabilities.
</script>

<script id="reason-set_master-datacenter_not_primary-template" type="text/x-handlebars-template">
    You have to <a href="#tables/{{namespace_id}}/replication">set</a> this server's datacenter as the primary one first.
</script>


<script id="reason-set_nothing-unsatisfiable_goals-template" type="text/x-handlebars-template">
    <a href="#tables/{{namespace_id}}/replication">Lower</a> the number of replicas or <a href="#servers">add a server</a> in this datacenter to avoid unsatisfiable goals.
</script>

<script id="reason-set_primary-set_secondary_first-template" type="text/x-handlebars-template">
    The server must be a secondary before becoming a master.
</script>

<script id="reason-set_primary-set_datecenter_as_primary-template" type="text/x-handlebars-template">
    You have to <a href="#tables/{{namespace_id}}/replication">set</a> this server's datacenter as the primary one first.
</script>

<script id="reason-set_primary-no_datacenter-template" type="text/x-handlebars-template">
    You have to <a href="#servers">assign</a> this server to a datacenter first.
</script>

<script id="reason-set_secondary-increase_replicas-template" type="text/x-handlebars-template">
    You have to <a href="#tables/{{namespace_id}}/replication">increase</a> your number of replicas first.
</script>

<script id="alert-set_server-template" type="text/x-handlebars-template">
    <div class="alert" data-alert="alert">
        <a class="close" href="#">&times;</a>
        <p>You successfully set this server as a {{role}} for the shard {{shard}} of the table {{namespace_name}}</p>
    </div>
</script>

<script id="machine_view-recent_log_entry-template" type="text/x-handlebars-template">
    <div class="entry-metadata">
        <p class="datetime"><abbr class="timeago" title="{{timeago_timestamp}}">{{timeago_timestamp}}</abbr></p>
    </div>
    <p class="level">{{level}}</p>
    <p class="message">
        {{formatted_message}}
        {{#if json}}
            <a href="#" class="json" rel="popover" data-content="<pre>{{json}}</pre>" data-title="JSON applied to server">examine JSON</a>
        {{/if}}
    </p>
</script>

<script id="outdated_data-template" type="text/x-handlebars-template">
    <p>Sorry, we couldn't find any secondary up to date to replace this master.</p>
</script>

<script id="unassign-modal-template" type="text/x-handlebars-template">
    {{#if server_is_master}}
        <div class="alert alert-error">This server is master for some data. Please <a href="#servers/{{server_id}}">make</a> it at least secondary.</div>
    {{/if}}
    {{#unless has_datacenter}}
        <div class="alert alert-error">This server is not part of any datacenter</div>
    {{/unless}}
    {{#if not_enough_replicas}}
        You have to lower the number of replicas of the following tables to avoid unsatisfiable goals: {{links_to_namespaces_inline namespaces_need_less_replicas "replication"}}
    {{/if}}
    <div class="alert alert-error">Removing this server from its datacenter will remove all its responsabilities.</div>
    <div class="alert alert-error error_answer"></div>
    <p>Are you sure you want to remove this server <a href="#servers/{{id}}">{{name}}</a> from its datacenter?</p>
</script>

<script id="unassign-alert-template" type="text/x-handlebars-template">
    <div class="alert" data-alert="alert">
        <a class="close" href="#">&times;</a>
        <p>You removed this server from its datacenter</p>
    </div>
</script>
