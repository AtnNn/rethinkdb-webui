(function(){
function g(a){throw a;}var h=void 0,i=!0,k=null,l=!1,m,aa=this;
function ba(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function n(a){return"array"==ba(a)}Math.floor(2147483648*Math.random()).toString(36);function ca(a,b,c){return a.call.apply(a.bind,arguments)}function da(a,b,c){a||g(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function ea(a,b,c){ea=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ca:da;return ea.apply(k,arguments)}function fa(a,b){var c=a.split("."),d=aa;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&b!==h?d[e]=b:d=d[e]?d[e]:d[e]={}}function o(a,b){function c(){}c.prototype=b.prototype;a.vc=b.prototype;a.prototype=new c;a.prototype.constructor=a};function ga(a){Error.captureStackTrace?Error.captureStackTrace(this,ga):this.stack=Error().stack||"";a&&(this.message=String(a))}o(ga,Error);ga.prototype.name="CustomError";function p(a){return p.p(a)}fa("rethinkdb.query",p);p.p=function(a){return"number"===typeof a?new ha(a):new ia(a)};p.expr=p.p;p.Z=function(a){var b=a.split("."),a=b[0],b=b[1];b===h&&(b=a,a=h);return new t(b,a)};p.table=p.Z;function u(){}u.prototype.M=function(a,b){b=b||ja;b.M(this,a)};u.prototype.run=u.prototype.M;function ka(){}o(ka,u);ka.prototype.C=function(){var a=new la,b=this.compile();a.Y(b);b=new w;b.e(ma);x(b,3,a);return b};function na(a,b,c){this.tc=a;this.i=b;this.q=c.name;this.D=!!c.m;this.sc=!!c.required;this.h=c.a;this.ia=c.type;this.wa=l;switch(this.h){case oa:case pa:case qa:case ra:case sa:this.wa=i}this.T=c.defaultValue}var oa=3,pa=4,qa=6,ra=16,sa=18;var ta=Array.prototype;function ua(a,b){return a>b?1:a<b?-1:0};function va(a,b,c){this.Fa=a;this.q=b.name||k;this.rc=b.c||k;this.pc=b.f;this.n={};for(a=0;a<c.length;a++)b=c[a],this.n[b.i]=b}function wa(a){var a=a.n,b=[],c=0,d;for(d in a)b[c++]=a[d];ta.sort.call(b,function(a,b){return a.i-b.i}||ua);return b};function y(){this.l={};this.u=this.constructor.u;this.n=this.u.n;this.r=this.ha=k}m=y.prototype;m.L=function(){return this.u};m.get=function(a,b){return z(this,a.i,b)};m.set=function(a,b){x(this,a.i,b)};m.add=function(a,b){xa(this,a.i,b)};
m.g=function(a){if(!a||this.constructor!=a.constructor)return l;for(var b=wa(this.L()),c=0;c<b.length;c++){var d=b[c];if(A(this,d.i)!=A(a,d.i))return l;if(A(this,d.i)){var e=11==d.h||10==d.h,j=ya(this,d),f=ya(a,d);if(d.D){if(j.length!=f.length)return l;for(d=0;d<j.length;d++)if(!(e?j[d].g(f[d]):j[d]==f[d]))return l}else if(!(e?j.g(f):j==f))return l}}return i};function A(a,b){return b in a.l&&a.l[b]!==h&&a.l[b]!==k}
function ya(a,b){var c=b.i;if(!c in a.l)return k;var d=a.l[c];return d==k?k:a.ha?!(c in a.r)?(d=a.ha.qc(a,b,d),a.r[c]=d):a.r[c]:d}function z(a,b,c){b=a.n[b];a=ya(a,b);if(b.D)return n(a),a[c||0];n(a);return a}function B(a,b){var c;if(A(a,b))c=z(a,b,h);else{c=a.n[b];if(c.T===h){var d=c.ia;c.T=d===Boolean?l:d===Number?0:d===String?"":new d}c=c.T}return c}function za(a,b){return a.n[b].D?(A(a,b)&&n(a.l[b]),A(a,b)?a.l[b].length:0):A(a,b)?1:0}function x(a,b,c){a.l[b]=c;a.r&&(a.r[b]=c)}
function xa(a,b,c){a.l[b]||(a.l[b]=[]);a.l[b].push(c);a.r&&delete a.r[b]}function C(a,b){var c=[],d,e;for(e in b)b.hasOwnProperty(e)&&(0==e?d=b[0]:c.push(new na(a,e,b[e])));a.u=new va(a,d,c);a.L=function(){return a.u}};function D(){y.apply(this)}o(D,y);D.prototype.J=function(a){x(this,1,a)};function E(){y.apply(this)}o(E,y);E.prototype.O=function(a){x(this,1,a)};E.prototype.Y=function(a){x(this,2,a)};function F(){y.apply(this)}o(F,y);F.prototype.e=function(a){x(this,1,a)};F.prototype.O=function(a){x(this,2,a)};function Aa(){y.apply(this)}o(Aa,y);function Ba(){y.apply(this)}o(Ba,y);function Ca(){y.apply(this)}o(Ca,y);function G(){y.apply(this)}o(G,y);G.prototype.o=function(){return B(this,1)};
G.prototype.k=function(a){x(this,1,a)};G.prototype.z=function(a){x(this,2,a)};G.prototype.N=function(a){x(this,3,a)};function Da(){y.apply(this)}o(Da,y);Da.prototype.o=function(){return B(this,1)};Da.prototype.k=function(a){x(this,1,a)};function H(){y.apply(this)}o(H,y);H.prototype.e=function(a){x(this,1,a)};H.prototype.V=function(){return z(this,2)};H.prototype.H=function(a){x(this,2,a)};
var Ea=19,Fa={Pb:1,pb:2,vb:3,tb:4,wb:5,Ub:6,xb:7,Jb:8,Va:9,bc:11,Ra:14,fc:15,Mb:16,hb:17,Lb:18,$a:Ea,mb:20,Ib:21,ab:22,Tb:23,gb:24,Db:26,lc:27,Qb:28,dc:29,Wa:30,$b:31,rb:32,Ta:35,Sa:36,Yb:37};function Ga(){y.apply(this)}o(Ga,y);function Ha(){y.apply(this)}o(Ha,y);Ha.prototype.A=function(a){x(this,1,a)};function Ia(){y.apply(this)}o(Ia,y);Ia.prototype.A=function(a){x(this,1,a)};function Ja(){y.apply(this)}o(Ja,y);Ja.prototype.V=function(){return z(this,1)};Ja.prototype.H=function(a){x(this,1,a)};
function Ka(){y.apply(this)}o(Ka,y);function La(){y.apply(this)}o(La,y);La.prototype.z=function(a){x(this,1,a)};function Ma(){y.apply(this)}o(Ma,y);Ma.prototype.I=function(a){x(this,4,a)};function I(){y.apply(this)}o(I,y);I.prototype.X=function(a){x(this,1,a)};I.prototype.I=function(a){x(this,2,a)};function Na(){y.apply(this)}o(Na,y);Na.prototype.X=function(a){x(this,1,a)};Na.prototype.I=function(a){x(this,2,a)};function la(){y.apply(this)}o(la,y);la.prototype.Y=function(a){x(this,1,a)};
function J(){y.apply(this)}o(J,y);J.prototype.e=function(a){x(this,1,a)};function Oa(){y.apply(this)}o(Oa,y);Oa.prototype.A=function(a){x(this,2,a)};function Pa(){y.apply(this)}o(Pa,y);function Qa(){y.apply(this)}o(Qa,y);Qa.prototype.A=function(a){x(this,2,a)};function Ra(){y.apply(this)}o(Ra,y);Ra.prototype.o=function(){return B(this,1)};Ra.prototype.k=function(a){x(this,1,a)};function Sa(){y.apply(this)}o(Sa,y);Sa.prototype.o=function(){return B(this,1)};Sa.prototype.k=function(a){x(this,1,a)};
function Ta(){y.apply(this)}o(Ta,y);Ta.prototype.O=function(a){x(this,2,a)};function Ua(){y.apply(this)}o(Ua,y);m=Ua.prototype;m.o=function(){return B(this,1)};m.k=function(a){x(this,1,a)};m.z=function(a){x(this,2,a)};m.N=function(a){x(this,3,a)};m.A=function(a){x(this,4,a)};function K(){y.apply(this)}o(K,y);K.prototype.o=function(){return B(this,1)};K.prototype.k=function(a){x(this,1,a)};K.prototype.z=function(a){x(this,2,a)};K.prototype.N=function(a){x(this,3,a)};function Va(){y.apply(this)}
o(Va,y);m=Va.prototype;m.o=function(){return B(this,1)};m.k=function(a){x(this,1,a)};m.z=function(a){x(this,2,a)};m.N=function(a){x(this,3,a)};m.A=function(a){x(this,4,a)};function L(){y.apply(this)}o(L,y);L.prototype.e=function(a){x(this,1,a)};L.prototype.J=function(a){x(this,2,a)};function Wa(){y.apply(this)}o(Wa,y);Wa.prototype.o=function(){return B(this,3)};Wa.prototype.k=function(a){x(this,3,a)};function w(){y.apply(this)}o(w,y);w.prototype.e=function(a){x(this,1,a)};
w.prototype.v=function(){return z(this,2)};w.prototype.ma=function(a){x(this,2,a)};var ma=1,Xa={Zb:ma,oc:2,bb:3,cc:4,Kb:5};function Ya(){y.apply(this)}o(Ya,y);Ya.prototype.v=function(){return z(this,2)};Ya.prototype.ma=function(a){x(this,2,a)};function Za(){y.apply(this)}o(Za,y);C(D,{"0":{name:"TableRef",c:"TableRef"},1:{name:"db_name",a:9,type:String},2:{name:"table_name",a:9,type:String}});C(E,{"0":{name:"VarTermTuple",c:"VarTermTuple"},1:{name:"var",a:9,type:String},2:{name:"term",a:11,type:F}});
C(F,{"0":{name:"Term",c:"Term"},1:{name:"type",a:14,defaultValue:0,type:{Bb:0,nc:1,Eb:2,Za:3,ub:4,lb:5,Rb:6,ec:7,JSON:8,BOOL:9,Ua:10,Sb:11,qb:12,kc:13,Ab:14}},2:{name:"var",a:9,type:String},3:{name:"let",a:11,type:Aa},4:{name:"call",a:11,type:Ba},5:{name:"if_",a:11,type:Ca},6:{name:"error",a:9,type:String},7:{name:"number",a:1,type:Number},8:{name:"valuestring",a:9,type:String},9:{name:"jsonstring",a:9,type:String},10:{name:"valuebool",a:8,type:Boolean},11:{name:"array",m:i,a:11,type:F},12:{name:"object",
m:i,a:11,type:E},14:{name:"get_by_key",a:11,type:G},15:{name:"table",a:11,type:Da},16:{name:"javascript",a:9,type:String}});C(Aa,{"0":{name:"Let",f:F,c:"Term.Let"},1:{name:"binds",m:i,a:11,type:E},2:{name:"expr",a:11,type:F}});C(Ba,{"0":{name:"Call",f:F,c:"Term.Call"},1:{name:"builtin",a:11,type:H},2:{name:"args",m:i,a:11,type:F}});C(Ca,{"0":{name:"If",f:F,c:"Term.If"},1:{name:"test",a:11,type:F},2:{name:"true_branch",a:11,type:F},3:{name:"false_branch",a:11,type:F}});
C(G,{"0":{name:"GetByKey",f:F,c:"Term.GetByKey"},1:{name:"table_ref",a:11,type:D},2:{name:"attrname",a:9,type:String},3:{name:"key",a:11,type:F}});C(Da,{"0":{name:"Table",f:F,c:"Term.Table"},1:{name:"table_ref",a:11,type:D}});
C(H,{"0":{name:"Builtin",c:"Builtin"},1:{name:"type",a:14,defaultValue:1,type:Fa},2:{name:"attr",a:9,type:String},3:{name:"attrs",m:i,a:9,type:String},4:{name:"comparison",a:14,defaultValue:1,type:{kb:1,Ob:2,Hb:3,Cb:4,sb:5,ob:6}},5:{name:"filter",a:11,type:Ga},6:{name:"map",a:11,type:Ha},7:{name:"concat_map",a:11,type:Ia},8:{name:"order_by",m:i,a:11,type:Ja},9:{name:"reduce",a:11,type:Ma},10:{name:"grouped_map_reduce",a:11,type:Ka},11:{name:"range",a:11,type:La}});
C(Ga,{"0":{name:"Filter",f:H,c:"Builtin.Filter"},1:{name:"predicate",a:11,type:Na}});C(Ha,{"0":{name:"Map",f:H,c:"Builtin.Map"},1:{name:"mapping",a:11,type:I}});C(Ia,{"0":{name:"ConcatMap",f:H,c:"Builtin.ConcatMap"},1:{name:"mapping",a:11,type:I}});C(Ja,{"0":{name:"OrderBy",f:H,c:"Builtin.OrderBy"},1:{name:"attr",a:9,type:String},2:{name:"ascending",a:8,defaultValue:1,type:Boolean}});
C(Ka,{"0":{name:"GroupedMapReduce",f:H,c:"Builtin.GroupedMapReduce"},1:{name:"group_mapping",a:11,type:I},2:{name:"value_mapping",a:11,type:I},3:{name:"reduction",a:11,type:Ma}});C(La,{"0":{name:"Range",f:H,c:"Builtin.Range"},1:{name:"attrname",a:9,type:String},2:{name:"lowerbound",a:11,type:F},3:{name:"upperbound",a:11,type:F}});C(Ma,{"0":{name:"Reduction",c:"Reduction"},1:{name:"base",a:11,type:F},2:{name:"var1",a:9,type:String},3:{name:"var2",a:9,type:String},4:{name:"body",a:11,type:F}});
C(I,{"0":{name:"Mapping",c:"Mapping"},1:{name:"arg",a:9,type:String},2:{name:"body",a:11,type:F}});C(Na,{"0":{name:"Predicate",c:"Predicate"},1:{name:"arg",a:9,type:String},2:{name:"body",a:11,type:F}});C(la,{"0":{name:"ReadQuery",c:"ReadQuery"},1:{name:"term",a:11,type:F},2:{name:"max_chunk_size",a:3,type:String},3:{name:"max_age",a:3,type:String}});
C(J,{"0":{name:"WriteQuery",c:"WriteQuery"},1:{name:"type",a:14,defaultValue:1,type:{mc:1,fb:2,Nb:3,yb:4,zb:5,nb:6,Xb:7,Vb:8,Wb:9}},2:{name:"update",a:11,type:Oa},3:{name:"delete",a:11,type:Pa},4:{name:"mutate",a:11,type:Qa},5:{name:"insert",a:11,type:Ra},6:{name:"insert_stream",a:11,type:Sa},7:{name:"for_each",a:11,type:Ta},8:{name:"point_update",a:11,type:Ua},9:{name:"point_delete",a:11,type:K},10:{name:"point_mutate",a:11,type:Va}});
C(Oa,{"0":{name:"Update",f:J,c:"WriteQuery.Update"},1:{name:"view",a:11,type:F},2:{name:"mapping",a:11,type:I}});C(Pa,{"0":{name:"Delete",f:J,c:"WriteQuery.Delete"},1:{name:"view",a:11,type:F}});C(Qa,{"0":{name:"Mutate",f:J,c:"WriteQuery.Mutate"},1:{name:"view",a:11,type:F},2:{name:"mapping",a:11,type:I}});C(Ra,{"0":{name:"Insert",f:J,c:"WriteQuery.Insert"},1:{name:"table_ref",a:11,type:D},2:{name:"terms",m:i,a:11,type:F}});
C(Sa,{"0":{name:"InsertStream",f:J,c:"WriteQuery.InsertStream"},1:{name:"table_ref",a:11,type:D},2:{name:"stream",a:11,type:F}});C(Ta,{"0":{name:"ForEach",f:J,c:"WriteQuery.ForEach"},1:{name:"stream",a:11,type:F},2:{name:"var",a:9,type:String},3:{name:"queries",m:i,a:11,type:J}});C(Ua,{"0":{name:"PointUpdate",f:J,c:"WriteQuery.PointUpdate"},1:{name:"table_ref",a:11,type:D},2:{name:"attrname",a:9,type:String},3:{name:"key",a:11,type:F},4:{name:"mapping",a:11,type:I}});
C(K,{"0":{name:"PointDelete",f:J,c:"WriteQuery.PointDelete"},1:{name:"table_ref",a:11,type:D},2:{name:"attrname",a:9,type:String},3:{name:"key",a:11,type:F}});C(Va,{"0":{name:"PointMutate",f:J,c:"WriteQuery.PointMutate"},1:{name:"table_ref",a:11,type:D},2:{name:"attrname",a:9,type:String},3:{name:"key",a:11,type:F},4:{name:"mapping",a:11,type:I}});
C(L,{"0":{name:"MetaQuery",c:"MetaQuery"},1:{name:"type",a:14,defaultValue:1,type:{cb:1,ib:2,Fb:3,eb:4,jb:5,Gb:6}},2:{name:"db_name",a:9,type:String},3:{name:"create_table",a:11,type:Wa},4:{name:"drop_table",a:11,type:D}});C(Wa,{"0":{name:"CreateTable",f:L,c:"MetaQuery.CreateTable"},1:{name:"datacenter",a:9,type:String},3:{name:"table_ref",a:11,type:D},4:{name:"primary_key",a:9,defaultValue:"id",type:String}});
C(w,{"0":{name:"Query",c:"Query"},1:{name:"type",a:14,defaultValue:ma,type:Xa},2:{name:"token",a:3,type:String},3:{name:"read_query",a:11,type:la},4:{name:"write_query",a:11,type:J},5:{name:"meta_query",a:11,type:L}});C(Ya,{"0":{name:"Response",c:"Response"},1:{name:"status_code",a:14,defaultValue:0,type:{gc:0,hc:1,ic:2,jc:3,Ya:101,Xa:102,ac:103}},2:{name:"token",a:3,type:String},3:{name:"response",m:i,a:9,type:String},4:{name:"error_message",a:9,type:String},5:{name:"backtrace",a:11,type:Za}});
C(Za,{"0":{name:"Backtrace",f:Ya,c:"Response.Backtrace"},1:{name:"frame",m:i,a:9,type:String}});function M(){}o(M,ka);function ia(a){this.P=a}o(ia,M);ia.prototype.compile=function(){var a=new F;a.e(8);var b=JSON.stringify(this.P);x(a,9,b);return a};function ha(a){this.P="undefined"===typeof a?k:a}o(ha,M);ha.prototype.compile=function(){var a=new F;this.P===k?a.e(0):(a.e(6),x(a,7,this.P));return a};function N(a,b,c){this.pa=a;this.da=b;this.ba=c||k}o(N,M);
N.prototype.compile=function(){var a=new H;a.e(this.pa);this.ba&&this.ba(a);var b=new Ba;x(b,1,a);for(var c in this.da)a=this.da[c].compile(),xa(b,2,a);c=new F;c.e(3);x(c,4,b);return c};function $a(a,b){M.prototype[b]=function(b){b instanceof M||(b=p.p(b));return new N(a,[this,b])}}function ab(a,b){M.prototype[b]=function(b){b instanceof M||(b=p.p(b));return new N(Ea,[this,b],function(b){x(b,4,a)})}}$a(14,"add");$a(15,"sub");$a(16,"mul");$a(17,"div");$a(18,"mod");ab(1,"eq");ab(2,"ne");ab(3,"lt");
ab(4,"le");ab(5,"gt");ab(6,"ge");M.prototype.W=function(){return new N(1,[this])};M.prototype.not=M.prototype.W;M.prototype.length=function(){return new N(26,[this])};M.prototype.length=M.prototype.length;M.prototype.ca=function(a){return a instanceof M?new N(36,[this,a]):new N(36,[this,p.p(a)])};M.prototype.and=M.prototype.ca;M.prototype.ja=function(a){return a instanceof M?new N(35,[this,a]):new N(35,[this,p.p(a)])};M.prototype.or=M.prototype.ja;
M.prototype.na=function(a,b){return new N(37,[this],function(c){var d=new La;d.z("id");var e=a.compile();x(d,2,e);e=b.compile();x(d,3,e);x(c,11,d)})};M.prototype.between=M.prototype.na;function bb(a,b,c){N.call(this,11,[a,new ha(b),new ha(c)])}o(bb,N);M.prototype.slice=function(a,b){return new bb(this,a,b)};M.prototype.slice=M.prototype.slice;M.prototype.Ea=function(a){return new bb(this,0,a)};M.prototype.limit=M.prototype.Ea;M.prototype.La=function(a){return new bb(this,a)};M.prototype.skip=M.prototype.La;
M.prototype.Ha=function(a){return new N(28,[this,new ha(a)])};M.prototype.nth=M.prototype.Ha;M.prototype.filter=function(a){var b;if(a instanceof cb)b=a;else if(a instanceof M)b=new cb([""],a);else{var c=[],d;for(d in a)a.hasOwnProperty(d)&&c.push(p.Q(d).eq(p.p(a[d])));b=new cb([""],new N(36,c))}return new N(20,[this],function(a){var c=new Na;c.X(b.K[0]);c.I(b.body.compile());var d=new Ga;x(d,1,c);x(a,5,d)})};M.prototype.filter=M.prototype.filter;
M.prototype.map=function(a){var b;a instanceof cb?b=a:a instanceof M&&(b=p.U("",a));return new N(21,[this],function(a){var d=new I;d.X(b.K[0]);d.I(b.body.compile());var e=new Ha;e.A(d);x(a,6,e)})};M.prototype.map=M.prototype.map;M.prototype.Ia=function(a){var b=Array.prototype.slice.call(arguments,0);return new N(23,[this],function(a){for(var d=0;d<b.length;d++){var e=i,j=b[d];"-"===j[0]&&(e=l,j=j.slice(1));var f=new Ja;f.H(j);x(f,2,e);xa(a,8,f)}})};M.prototype.orderby=M.prototype.Ia;
M.prototype.xa=function(){return new N(24,[this])};M.prototype.distinct=M.prototype.xa;M.prototype.reduce=function(a,b){return new N(31,[this],function(c){var d=new Ma,e=a.compile();x(d,1,e);x(d,2,b.K[0]);x(d,3,b.K[1]);d.I(b.body.compile());x(c,9,d)})};M.prototype.reduce=M.prototype.reduce;M.prototype.V=function(a){return new N(2,[this],function(b){b.H(a)})};M.prototype.getAttr=M.prototype.V;M.prototype.ka=function(a){n(a)||(a=[a]);return new N(6,[this],function(b){for(var c in a)xa(b,3,a[c])})};
M.prototype.pickAttrs=M.prototype.ka;M.prototype.Ja=function(a){return this.map(p.U("a",p.Q("$a").ka(a)))};M.prototype.pluck=M.prototype.Ja;function cb(a,b){this.K=a;this.body=b}p.U=function(a){var b=arguments[arguments.length-1],c=Array.prototype.slice.call(arguments,0,arguments.length-1);return new cb(c,b)};p.fn=p.U;function db(a){this.Qa=a}o(db,M);db.prototype.compile=function(){var a=new F;a.e(1);a.O(this.Qa);return a};function eb(a,b){N.call(this,2,[a],function(a){a.H(b)})}o(eb,N);
function fb(a){N.call(this,3,[],function(b){b.H(a)})}o(fb,N);p.Q=function(a){for(var a=a.split("."),b=a.shift(),c=k,c="$"===b[0]?new db(b.slice(1)):new fb(b);b=a.shift();)c=new eb(c,b);return c};p.R=p.Q;M.prototype.extend=function(a){a instanceof M||(a=p.p(a));return new N(8,[this,a])};M.prototype.extend=M.prototype.extend;function gb(a,b,c){this.Na=a;this.Oa=b;this.za=c}o(gb,M);
gb.prototype.compile=function(){var a=new Ca,b=this.Na.compile();x(a,1,b);b=this.Oa.compile();x(a,2,b);b=this.za.compile();x(a,3,b);b=new F;b.e(4);x(b,5,a);return b};p.Aa=function(a,b,c){return new gb(a,b,c)};p.ifThenElse=p.Aa;function hb(a,b){this.ea=a;this.oa=b}o(hb,M);hb.prototype.compile=function(){var a=new Aa,b;for(b in this.ea){var c=this.ea[b],d=new E;d.O(c[0]);d.Y(c[1].compile());xa(a,1,d)}b=this.oa.compile();x(a,2,b);b=new F;b.e(2);x(b,3,a);return b};
p.Da=function(a){var b=Array.prototype.slice.call(arguments,0,arguments.length-1);return new hb(b,arguments[arguments.length-1])};p.let=p.Da;function ib(a,b){this.Pa=a;this.t=b||k}o(ib,u);ib.prototype.C=function(){var a=new L;a.e(this.Pa);this.t&&a.J(this.t);var b=new w;b.e(5);x(b,5,a);return b};p.ra=function(a){return new ib(1,a)};p.dbCreate=p.ra;p.sa=function(a){return new ib(2,a)};p.dbDrop=p.sa;p.ta=function(){return new ib(3)};p.dbList=p.ta;function O(a){this.q=a}p.db=function(a){return new O(a)};p.db=p.db;O.prototype.list=function(){return new ib(6,this.q)};O.prototype.list=O.prototype.list;
function kb(a,b,c,d){this.qa=a;this.t=b;this.$=c;this.primaryKey=d||k}o(kb,u);kb.prototype.C=function(){var a=new D;a.J(this.t);x(a,2,this.$);var b=new Wa;x(b,1,this.qa);b.k(a);this.Ka&&x(b,4,this.Ka);a=new L;a.e(4);x(a,3,b);b=new w;b.e(5);x(b,5,a);return b};O.prototype.create=function(a,b){return new kb("Welcome-dc",this.q,a,b)};O.prototype.create=O.prototype.create;function lb(a,b){this.t=a;this.$=b}o(lb,u);
lb.prototype.C=function(){var a=new D;a.J(this.t);x(a,2,this.$);var b=new L;b.e(5);x(b,4,a);a=new w;a.e(5);x(a,5,b);return a};O.prototype.ya=function(a){return new lb(this.q,a)};O.prototype.drop=O.prototype.ya;O.prototype.Z=function(a){return new t(a,this.q)};O.prototype.table=O.prototype.Z;function mb(){}mb.prototype.ga=function(a,b){return 11==a.h||10==a.h?nb(this,b):b};function ob(a,b){this.d=a|0;this.b=b|0}var pb={};function qb(a){if(-128<=a&&128>a){var b=pb[a];if(b)return b}b=new ob(a|0,0>a?-1:0);-128<=a&&128>a&&(pb[a]=b);return b}function P(a){return isNaN(a)||!isFinite(a)?Q:a<=-rb?R:a+1>=rb?sb:0>a?S(P(-a)):new ob(a%T|0,a/T|0)}function U(a,b){return new ob(a,b)}var T=4294967296,rb=T*T/2,Q=qb(0),tb=qb(1),ub=qb(-1),sb=U(-1,2147483647),R=U(0,-2147483648),vb=qb(16777216);m=ob.prototype;
m.toString=function(a){a=a||10;(2>a||36<a)&&g(Error("radix out of range: "+a));if(V(this))return"0";if(0>this.b){if(this.g(R)){var b=P(a),c=W(this,b),b=wb(c.multiply(b),this);return c.toString(a)+b.d.toString(a)}return"-"+S(this).toString(a)}for(var c=P(Math.pow(a,6)),b=this,d="";;){var e=W(b,c),j=wb(b,e.multiply(c)).d.toString(a),b=e;if(V(b))return j+d;for(;6>j.length;)j="0"+j;d=""+j+d}};function xb(a){return 0<=a.d?a.d:T+a.d}function V(a){return 0==a.b&&0==a.d}
m.g=function(a){return this.b==a.b&&this.d==a.d};function yb(a,b){if(a.g(b))return 0;var c=0>a.b,d=0>b.b;return c&&!d?-1:!c&&d?1:0>wb(a,b).b?-1:1}function S(a){return a.g(R)?R:a.W().add(tb)}m.add=function(a){var b=this.b>>>16,c=this.b&65535,d=this.d>>>16,e=a.b>>>16,j=a.b&65535,f=a.d>>>16,q;q=0+((this.d&65535)+(a.d&65535));a=0+(q>>>16);a+=d+f;d=0+(a>>>16);d+=c+j;c=0+(d>>>16);return U((a&65535)<<16|q&65535,(c+(b+e)&65535)<<16|d&65535)};function wb(a,b){return a.add(S(b))}
m.multiply=function(a){if(V(this)||V(a))return Q;if(this.g(R))return 1==(a.d&1)?R:Q;if(a.g(R))return 1==(this.d&1)?R:Q;if(0>this.b)return 0>a.b?S(this).multiply(S(a)):S(S(this).multiply(a));if(0>a.b)return S(this.multiply(S(a)));if(0>yb(this,vb)&&0>yb(a,vb))return P((this.b*T+xb(this))*(a.b*T+xb(a)));var b=this.b>>>16,c=this.b&65535,d=this.d>>>16,e=this.d&65535,j=a.b>>>16,f=a.b&65535,q=a.d>>>16,a=a.d&65535,s,r,v,jb;jb=0+e*a;v=0+(jb>>>16);v+=d*a;r=0+(v>>>16);v=(v&65535)+e*q;r+=v>>>16;r+=c*a;s=0+(r>>>
16);r=(r&65535)+d*q;s+=r>>>16;r=(r&65535)+e*f;s+=r>>>16;return U((v&65535)<<16|jb&65535,(s+(b*a+c*q+d*f+e*j)&65535)<<16|r&65535)};
function W(a,b){V(b)&&g(Error("division by zero"));if(V(a))return Q;if(a.g(R)){if(b.g(tb)||b.g(ub))return R;if(b.g(R))return tb;var c=W(zb(a,1),b).shiftLeft(1);if(c.g(Q))return 0>b.b?tb:ub;var d=wb(a,b.multiply(c));return c.add(W(d,b))}if(b.g(R))return Q;if(0>a.b)return 0>b.b?W(S(a),S(b)):S(W(S(a),b));if(0>b.b)return S(W(a,S(b)));for(var e=Q,d=a;0<=yb(d,b);){for(var c=Math.max(1,Math.floor((d.b*T+xb(d))/(b.b*T+xb(b)))),j=Math.ceil(Math.log(c)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),f=P(c),q=f.multiply(b);0>
q.b||0<yb(q,d);)c-=j,f=P(c),q=f.multiply(b);V(f)&&(f=tb);e=e.add(f);d=wb(d,q)}return e}m.W=function(){return U(~this.d,~this.b)};m.ca=function(a){return U(this.d&a.d,this.b&a.b)};m.ja=function(a){return U(this.d|a.d,this.b|a.b)};function Ab(a,b){return U(a.d^b.d,a.b^b.b)}m.shiftLeft=function(a){a&=63;if(0==a)return this;var b=this.d;return 32>a?U(b<<a,this.b<<a|b>>>32-a):U(0,b<<a-32)};function zb(a,b){b&=63;if(0==b)return a;var c=a.b;return 32>b?U(a.d>>>b|c<<32-b,c>>b):U(c>>b-32,0<=c?0:-1)};function Bb(){this.j=0}o(Bb,mb);function X(a){g(new ga("Error deserializing incorrectly formated message, "+a))}function nb(a,b){for(var c=wa(b.L()),d=[],e=0,j=0;j<c.length;j++){var f=c[j];if(A(b,f.i)){var q=0;do{var s=a.ga(f,b.get(f,q));d.push(s);e+=s.byteLength;q++}while(f.D&&q<za(b,f.i))}}c=new Uint8Array(e);for(j=e=0;j<d.length;j++)f=d[j],c.set(new Uint8Array(f),e),e+=f.byteLength;return c}
Bb.prototype.ga=function(a,b){var c=a.h,d=Cb[c],e=Db(P(a.i<<3|d)),j;switch(d){case Y:var f=P(b);if(c==sa||17==c)f=Ab(f.shiftLeft(1),zb(f,63));j=Db(f);break;case Eb:f=new ArrayBuffer(8);c=new DataView(f);switch(a.h){case 1:c.setFloat64(0,b,i);break;case qa:j=P(b);c.setUint32(0,xb(j),i);c.setUint32(4,j.b,i);break;case ra:j=P(b);c.setUint32(0,xb(j),i);c.setInt32(4,j.b,i);break;default:X("Unexpected field type")}j=new Uint8Array(f);break;case Fb:switch(a.h){case 11:f=nb(this,b);break;case 9:case 12:f=
TextEncoder("utf-8").encode(b);break;default:X("Unexpected field type")}j=f.length;c=Db(P(j));j=new Uint8Array(c.length+j);j.set(c,0);j.set(f,c.length);break;case Gb:X("Use of Groups deprecated and not supported");break;case Hb:f=new ArrayBuffer(4);c=new DataView(f);switch(a.h){case 2:c.setFloat32(0,b,i);break;case 7:c.setUint32(0,b,i);break;case 15:c.setInt32(0,b,i);break;default:X("Unexpected field type")}j=new Uint8Array(f);break;default:X("Unexpected wire type")}f=new Uint8Array(e.length+j.length);
f.set(new Uint8Array(e),0);f.set(new Uint8Array(j),e.length);return f};function Db(a){function b(a){var d=P(128),d=wb(a,W(a,d).multiply(d)).d,e=P(127);0<yb(a,e)?(d+=128,a=b(zb(a,7)),a.unshift(d)):a=[d];return a}a=b(a);return new Uint8Array(a)}
function Ib(a,b,c){var d=b.L();for(a.j=0;a.j<c.length;){var e=Jb(a,c),j=d.n[parseInt(e>>3,10)]||k,f=a,q=e%8,s=j,e=c,r=h;switch(q){case Y:e=Jb(f,e);if(s){f=h;switch(s.h){case oa:case pa:f=e.toString();break;case 5:case 13:case 14:f=e;break;case 17:e=P(e);f=Ab(zb(e,1),e.shiftLeft(63)).d;break;case sa:e=P(e);f=Ab(zb(e,1),e.shiftLeft(63)).toString();break;case 8:f=0===f?l:i;break;default:X("Unexpected field type")}r=f}else r=k;break;case Fb:q=e;e=Jb(f,q);q=new Uint8Array(q.buffer,q.byteOffset+f.j,e);
f.j+=e;if(s){e=h;switch(s.h){case 9:case 12:e=TextDecoder("utf-8").decode(q);break;case 11:e=q;f=new Bb;s=new s.ia.u.Fa;Ib(f,s,e);e=s;break;default:X("Unexpected field type")}r=e}else r=k;break;case Hb:e=new DataView(e.buffer,f.j,4);f.j+=4;if(s){f=h;switch(s.h){case 2:f=e.getFloat32(0,i);break;case 7:f=e.getUint32(0,i);break;case 15:f=e.getInt32(0,i);break;default:X("Unexpected field type")}r=f}else r=k;break;case Eb:e=new DataView(e.buffer,f.j,8);f.j+=8;if(s){f=h;switch(s.h){case 1:f=e.getFloat64(0,
i);break;case qa:f=(new ob(e.getUint32(0,i),e.getUint32(4,i))).toString();break;case ra:f=(new ob(e.getUint32(0,i),e.getInt32(4,i))).toString();break;default:X("Unexpected field type")}r=f}else r=k;break;default:X("Unexpected wire type of "+q)}e=r;j!=k&&e!=k&&(j.D?b.add(j,e):b.set(j,e))}}function Jb(a,b){var c=b[a.j++];if(127<c)var c=c-128,d=Jb(a,b),c=c+(d<<7);return c}var Y=0,Eb=1,Fb=2,Gb=3,Hb=5,Cb=[-1,Eb,Hb,Y,Y,Y,Eb,Hb,Y,Fb,Gb,Fb,Fb,Y,Y,Hb,Eb,Y,Y];function Z(a){this.va=a||"Welcome-db";this.F={};this.Ga=1;ja=this}Z.prototype.close=function(){};Z.prototype.M=function(a,b){var c=a.C();c.ma((this.Ga++).toString());this.F[c.v()]=b;var c=nb(new Bb,c),d=c.byteLength,e=new Uint8Array(d+4);(new DataView(e.buffer)).setInt32(0,d,i);e.set(c,4);this.la(e.buffer)};Z.prototype.run=Z.prototype.M;
function Kb(a,b){(new DataView(b.buffer)).getUint32(0,i)!==b.length-4&&g("message is wrong length");try{var c=new Ya;Ib(new Bb,c,new Uint8Array(b.buffer,4));var d=z(c,1),e=a.F[c.v()];switch(d){case 101:g("Broken client");case 103:g("Runtime error");case 102:g("bad query");case 0:delete a.F[c.v()];e&&e();break;case 3:delete a.F[c.v()];if(e){var j=ya(c,c.n[3]);j==k||n(j);var f=(j||[]).map(JSON.parse);e(f)}break;case 1:delete a.F[c.v()];if(e){var q=JSON.parse(z(c,3,0));e(q)}break;case 2:g("partial results not yet implemented");
default:g("unknown response status code")}}catch(s){g(s)}};function $(a,b,c){Z.call(this,k);this.w=k;this.uc=0;this.s=k;var d=this;d.s=k;var e;e=a?n(a)?a:[a]:["localhost"];var j=require("net");(function q(){var a=e.shift();if(a){var r;"string"===typeof a?(r=a,a=12346):(r=a.host||"localhost",a=a.port||12346);var v=j.connect(a,r,function(){v.write("35ba61af","hex");v.on("data",ea(d.Ma,d));d.s=v;b&&b(d)});v.on("error",q)}else c&&c()})()}o($,Z);fa("rethinkdb.net.TcpConnection",$);
$.prototype.la=function(a){this.s||g("Connection not open");for(var b=new Buffer(a.byteLength),c=new Uint8Array(a),d=0;d<a.byteLength;d++)b[d]=c[d];this.s.write(b)};
$.prototype.Ma=function(a){for(var a=new Uint8Array(a),b=0,c=a.byteLength;0<c;){if(this.w===k){var d=(new DataView(a.buffer,b,c)).getUint32(0,i);this.w=new Uint8Array(d+4);this.G=0}var d=this.w.byteLength-this.G,e=c<d?c:d,j=new Uint8Array(a.buffer,b,e);this.w.set(j,this.G);this.G+=e;b+=e;c-=e;d-=e;0>=d&&(d=this.w,this.w=k,this.G=0,Kb(this,d))}};$.prototype.close=function(){this.s||g("Connection not open");this.s.end();this.s=k};$.prototype.close=$.prototype.close;function Lb(a,b,c){Z.call(this,k);this.B="";var d=this,e;e=a?n(a)?a:[a]:["localhost"];(function f(){var a=e.shift();if(a){var s;"string"===typeof a?(s=a,a=21300):(s=a.host||"localhost",a=a.port||21300);var r="http://"+s+":"+a+"/ajax/reql/",v=new XMLHttpRequest;v.responseType="arraybuffer";v.open("GET",r+"open-new-connection",i);v.onreadystatechange=function(){if(v.readyState===4)if(v.status===200){d.B=r;d.S=(new DataView(v.response)).getInt32(0,i);b&&b(d)}else f()};v.send()}else c&&c()})()}o(Lb,Z);
fa("rethinkdb.net.HttpConnection",Lb);Lb.prototype.la=function(a){this.B||g("Connection not open");var b=new XMLHttpRequest;b.responseType="arraybuffer";b.open("POST",this.B+"?conn_id="+this.S,i);var c=this;b.onreadystatechange=function(){4===b.readyState&&200===b.status&&Kb(c,new Uint8Array(b.response))};b.send(a)};Lb.prototype.close=function(){this.B||g("Connection not open");var a=new XMLHttpRequest;a.open("POST",this.B+"close-connection?conn_id="+this.S,i);a.send();this.B=this.S=k};
Lb.prototype.close=Lb.prototype.close;fa("rethinkdb.net.connect",function(a,b,c){return"undefined"!==typeof require&&require("net")?new $(a,b,c):new Lb(a,b,c)});var ja=k;fa("rethinkdb.net.last_connection",ja);function t(a,b){this.ua=b||k;this.q=a}o(t,M);t.prototype.compile=function(){var a=new F;a.e(13);var b=new Da,c=new D;c.J(this.ua||ja.va);x(c,2,this.q);b.k(c);x(a,15,b);return a};function Mb(a,b){this.aa=a;this.Ca=new ia(b)}o(Mb,M);Mb.prototype.compile=function(){var a=this.aa.compile(),b=z(a,15).o(),a=new G;a.k(b);a.z("id");a.N(this.Ca.compile());b=new F;b.e(12);x(b,14,a);return b};t.prototype.get=function(a){return new Mb(this,a)};t.prototype.get=t.prototype.get;
function Nb(a,b){this.aa=a;n(b)||(b=[b]);this.fa=b}o(Nb,u);Nb.prototype.C=function(){var a=this.aa.compile(),b=z(a,15).o(),a=new Ra;a.k(b);for(b=0;b<this.fa.length;b++){var c=(new ia(this.fa[b])).compile();xa(a,2,c)}b=new J;b.e(4);x(b,5,a);a=new w;a.e(2);x(a,4,b);return a};t.prototype.Ba=function(a){return new Nb(this,a)};t.prototype.insert=t.prototype.Ba;"undefined"!==typeof exports&&("undefined"!==typeof module&&module.exports?exports=module.exports=aa.rethinkdb:exports.rethinkdb=aa.rethinkdb);
}).call(this);
