(function(){
var f=void 0,g=!0,j=null,k=!1,m,aa=this;
function ba(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function n(a){return"array"==ba(a)}Math.floor(2147483648*Math.random()).toString(36);function da(a,b,c){return a.call.apply(a.bind,arguments)}function ea(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function fa(a,b,c){fa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?da:ea;return fa.apply(j,arguments)}function o(a,b){var c=a.split("."),d=aa;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&b!==f?d[e]=b:d=d[e]?d[e]:d[e]={}}function p(a,b){function c(){}c.prototype=b.prototype;a.Yc=b.prototype;a.prototype=new c;a.prototype.constructor=a};aa.rethinkdb=function(a){return ga(a)};function q(a){return a instanceof r?a:ha(a)}function t(a){return a instanceof ia?a:ja(a)}function u(a,b){if(a){var c=b;n(b)||(c=[c]);if(!c.some(function(b){return"string"===typeof b?typeof a===b:a instanceof b})){if(n(b))throw new TypeError("Function argument "+a+" must be one of the types "+b);throw new TypeError("Function argument "+a+" must be of the type "+b);}}}
function w(a,b){if(a.length<b)throw new TypeError("Function requires at least "+b+" argument"+(1<b?"s.":"."));}function x(a){function b(a){return y.prototype.$.call(b,a)}var c=arguments[0],d=Array.prototype.slice.call(arguments,1);b.__proto__=c.prototype;c.apply(b,d);return b};function ha(a){if(!(a instanceof y))if("number"==typeof a)a=x(ka,a);else if("boolean"==typeof a)a=x(la,a);else if("string"==typeof a)a=x(ma,a);else if(n(a))a=x(na,a);else var b=typeof a,a="object"==b&&a!=j||"function"==b?x(oa,a):x(pa,a);return a}o("rethinkdb.expr",ha);o("rethinkdb.js",function(a){w(arguments,1);u(a,"string");return x(qa,a)});o("rethinkdb.table",function(a,b){w(arguments,1);u(a,"string");u(b,"boolean");return x(z,a,j,b)});function r(){}
r.prototype.ea=function(a,b){var c,d={};!a||"function"===typeof a?(c=b||A,d.callback=a):(c=a.conn||A,ra(d,a),delete d.conn);d.expr=this;if(!c)throw new C("No connection specified and no last connection to default to.");c.ea(d)};r.prototype.run=r.prototype.ea;r.prototype.fa=function(a){var b,c={};!a||a instanceof D?b=a||A:(b=a.conn||A,ra(c,a),delete c.conn);c.expr=this;if(!b)throw new C("No connection specified and no last connection to default to.");b.fa(c)};r.prototype.runp=r.prototype.fa;
r.prototype.ca=function(a,b){var c,d={};!a||"function"===typeof a?(c=b||A,d.callback=a):(c=a.conn||A,ra(d,a),delete d.conn);d.expr=this;if(!c)throw new C("No connection specified and no last connection to default to.");c.ca(d)};r.prototype.iter=r.prototype.ca;r.prototype.a=function(){return"----"};function sa(){}p(sa,r);sa.prototype.k=function(a){var b=new ta,a=this.compile(a);b.ga(a);a=new E;a.c(ua);F(a,3,b);return a};function va(a){Error.captureStackTrace?Error.captureStackTrace(this,va):this.stack=Error().stack||"";a&&(this.message=String(a))}p(va,Error);va.prototype.name="CustomError";function wa(a,b,c){this.Wc=a;this.p=b;this.r=c.name;this.Q=!!c.A;this.Vc=!!c.required;this.m=c.b;this.Da=c.type;this.Ta=k;switch(this.m){case xa:case ya:case za:case Aa:case Ba:this.Ta=g}this.la=c.defaultValue}var xa=3,ya=4,za=6,Aa=16,Ba=18;var Ca="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ra(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var h=0;h<Ca.length;h++)c=Ca[h],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Da=Array.prototype;function Ea(a,b){return a>b?1:a<b?-1:0};function Fa(a,b,c){this.$a=a;this.r=b.name||j;this.Uc=b.e||j;this.Sc=b.h;this.F={};for(a=0;a<c.length;a++)b=c[a],this.F[b.p]=b}function Ga(a){var a=a.F,b=[],c=0,d;for(d in a)b[c++]=a[d];Da.sort.call(b,function(a,b){return a.p-b.p}||Ea);return b};function G(){this.w={};this.K=this.constructor.K;this.F=this.K.F;this.H=this.Ca=j}m=G.prototype;m.aa=function(){return this.K};m.get=function(a,b){return H(this,a.p,b)};m.set=function(a,b){F(this,a.p,b)};m.add=function(a,b){I(this,a.p,b)};
m.j=function(a){if(!a||this.constructor!=a.constructor)return k;for(var b=Ga(this.aa()),c=0;c<b.length;c++){var d=b[c];if(Ha(this,d.p)!=Ha(a,d.p))return k;if(Ha(this,d.p)){var e=11==d.m||10==d.m,h=Ia(this,d),i=Ia(a,d);if(d.Q){if(h.length!=i.length)return k;for(d=0;d<h.length;d++)if(!(e?h[d].j(i[d]):h[d]==i[d]))return k}else if(!(e?h.j(i):h==i))return k}}return g};function Ha(a,b){return b in a.w&&a.w[b]!==f&&a.w[b]!==j}
function Ia(a,b){var c=b.p;if(!c in a.w)return j;var d=a.w[c];return d==j?j:a.Ca?!(c in a.H)?(d=a.Ca.Tc(a,b,d),a.H[c]=d):a.H[c]:d}function H(a,b,c){b=a.F[b];a=Ia(a,b);if(b.Q)return n(a),a[c||0];n(a);return a}function J(a,b){var c;if(Ha(a,b))c=H(a,b,f);else{c=a.F[b];if(c.la===f){var d=c.Da;c.la=d===Boolean?k:d===Number?0:d===String?"":new d}c=c.la}return c}function Ja(a,b){var c=Ia(a,a.F[b]);c==j||n(c);return c||[]}
function Ka(a,b){return a.F[b].Q?(Ha(a,b)&&n(a.w[b]),Ha(a,b)?a.w[b].length:0):Ha(a,b)?1:0}function F(a,b,c){a.w[b]=c;a.H&&(a.H[b]=c)}function I(a,b,c){a.w[b]||(a.w[b]=[]);a.w[b].push(c);a.H&&delete a.H[b]}function K(a,b){var c=[],d,e;for(e in b)b.hasOwnProperty(e)&&(0==e?d=b[0]:c.push(new wa(a,e,b[e])));a.K=new Fa(a,d,c);a.aa=function(){return a.K}};function L(){G.apply(this)}p(L,G);L.prototype.V=function(a){F(this,1,a)};function La(){G.apply(this)}p(La,G);La.prototype.O=function(a){F(this,1,a)};La.prototype.ga=function(a){F(this,2,a)};function M(){G.apply(this)}p(M,G);M.prototype.c=function(a){F(this,1,a)};M.prototype.O=function(a){F(this,2,a)};function Ma(a){return J(a,15)}function Na(){G.apply(this)}p(Na,G);function Oa(){G.apply(this)}p(Oa,G);function Pa(){G.apply(this)}p(Pa,G);function Qa(){G.apply(this)}p(Qa,G);
Qa.prototype.t=function(){return J(this,1)};Qa.prototype.o=function(a){F(this,1,a)};Qa.prototype.G=function(a){F(this,2,a)};Qa.prototype.I=function(a){F(this,3,a)};function Ra(){G.apply(this)}p(Ra,G);Ra.prototype.t=function(){return J(this,1)};Ra.prototype.o=function(a){F(this,1,a)};function N(){G.apply(this)}p(N,G);N.prototype.c=function(a){F(this,1,a)};N.prototype.$=function(){return H(this,2)};N.prototype.U=function(a){F(this,2,a)};
var Sa=19,Ta={pc:1,Pb:2,Vb:3,Tb:4,Wb:5,uc:6,Xb:7,jc:8,vb:9,Cc:11,rb:14,Gc:15,mc:16,Hb:17,lc:18,Ab:Sa,Mb:20,ic:21,Bb:22,tc:23,Gb:24,dc:26,Mc:27,qc:28,Ec:29,wb:30,Ac:31,Rb:32,tb:35,sb:36,yc:37,Zb:38,Pc:39};function Ua(){G.apply(this)}p(Ua,G);function Va(){G.apply(this)}p(Va,G);Va.prototype.v=function(a){F(this,1,a)};function Wa(){G.apply(this)}p(Wa,G);Wa.prototype.v=function(a){F(this,1,a)};function Xa(){G.apply(this)}p(Xa,G);Xa.prototype.$=function(){return H(this,1)};
Xa.prototype.U=function(a){F(this,1,a)};function Ya(){G.apply(this)}p(Ya,G);function Za(){G.apply(this)}p(Za,G);Za.prototype.G=function(a){F(this,1,a)};function $a(){G.apply(this)}p($a,G);$a.prototype.n=function(a){F(this,4,a)};function O(){G.apply(this)}p(O,G);O.prototype.B=function(a){F(this,1,a)};O.prototype.n=function(a){F(this,2,a)};function ab(){G.apply(this)}p(ab,G);ab.prototype.B=function(a){F(this,1,a)};ab.prototype.n=function(a){F(this,2,a)};function ta(){G.apply(this)}p(ta,G);
ta.prototype.ga=function(a){F(this,1,a)};function P(){G.apply(this)}p(P,G);P.prototype.c=function(a){F(this,1,a)};function bb(){G.apply(this)}p(bb,G);bb.prototype.W=function(a){F(this,1,a)};bb.prototype.v=function(a){F(this,2,a)};function cb(){G.apply(this)}p(cb,G);cb.prototype.W=function(a){F(this,1,a)};function db(){G.apply(this)}p(db,G);db.prototype.W=function(a){F(this,1,a)};db.prototype.v=function(a){F(this,2,a)};function eb(){G.apply(this)}p(eb,G);eb.prototype.t=function(){return J(this,1)};
eb.prototype.o=function(a){F(this,1,a)};function fb(){G.apply(this)}p(fb,G);fb.prototype.O=function(a){F(this,2,a)};function gb(){G.apply(this)}p(gb,G);m=gb.prototype;m.t=function(){return J(this,1)};m.o=function(a){F(this,1,a)};m.G=function(a){F(this,2,a)};m.I=function(a){F(this,3,a)};m.v=function(a){F(this,4,a)};function hb(){G.apply(this)}p(hb,G);hb.prototype.t=function(){return J(this,1)};hb.prototype.o=function(a){F(this,1,a)};hb.prototype.G=function(a){F(this,2,a)};
hb.prototype.I=function(a){F(this,3,a)};function ib(){G.apply(this)}p(ib,G);m=ib.prototype;m.t=function(){return J(this,1)};m.o=function(a){F(this,1,a)};m.G=function(a){F(this,2,a)};m.I=function(a){F(this,3,a)};m.v=function(a){F(this,4,a)};function jb(){G.apply(this)}p(jb,G);jb.prototype.c=function(a){F(this,1,a)};jb.prototype.V=function(a){F(this,2,a)};function kb(){G.apply(this)}p(kb,G);kb.prototype.t=function(){return J(this,3)};kb.prototype.o=function(a){F(this,3,a)};
function E(){G.apply(this)}p(E,G);E.prototype.c=function(a){F(this,1,a)};E.prototype.M=function(){return H(this,2)};E.prototype.Ba=function(){return J(this,2)};E.prototype.pa=function(a){F(this,2,a)};var ua=1,lb={zc:ua,Qc:2,Cb:3,Dc:4,kc:5};function mb(){G.apply(this)}p(mb,G);mb.prototype.M=function(){return H(this,2)};mb.prototype.Ba=function(){return J(this,2)};mb.prototype.pa=function(a){F(this,2,a)};function nb(){G.apply(this)}p(nb,G);
K(L,{"0":{name:"TableRef",e:"TableRef"},1:{name:"db_name",b:9,type:String},2:{name:"table_name",b:9,type:String},3:{name:"use_outdated",b:8,defaultValue:0,type:Boolean}});K(La,{"0":{name:"VarTermTuple",e:"VarTermTuple"},1:{name:"var",b:9,type:String},2:{name:"term",b:11,type:M}});
K(M,{"0":{name:"Term",e:"Term"},1:{name:"type",b:14,defaultValue:0,type:{bc:0,Oc:1,ec:2,zb:3,Ub:4,Lb:5,rc:6,Fc:7,JSON:8,BOOL:9,ub:10,sc:11,Qb:12,Lc:13,ac:14,Yb:15}},2:{name:"var",b:9,type:String},3:{name:"let",b:11,type:Na},4:{name:"call",b:11,type:Oa},5:{name:"if_",b:11,type:Pa},6:{name:"error",b:9,type:String},7:{name:"number",b:1,type:Number},8:{name:"valuestring",b:9,type:String},9:{name:"jsonstring",b:9,type:String},10:{name:"valuebool",b:8,type:Boolean},11:{name:"array",A:g,b:11,type:M},12:{name:"object",
A:g,b:11,type:La},14:{name:"get_by_key",b:11,type:Qa},15:{name:"table",b:11,type:Ra},16:{name:"javascript",b:9,type:String}});K(Na,{"0":{name:"Let",h:M,e:"Term.Let"},1:{name:"binds",A:g,b:11,type:La},2:{name:"expr",b:11,type:M}});K(Oa,{"0":{name:"Call",h:M,e:"Term.Call"},1:{name:"builtin",b:11,type:N},2:{name:"args",A:g,b:11,type:M}});K(Pa,{"0":{name:"If",h:M,e:"Term.If"},1:{name:"test",b:11,type:M},2:{name:"true_branch",b:11,type:M},3:{name:"false_branch",b:11,type:M}});
K(Qa,{"0":{name:"GetByKey",h:M,e:"Term.GetByKey"},1:{name:"table_ref",b:11,type:L},2:{name:"attrname",b:9,type:String},3:{name:"key",b:11,type:M}});K(Ra,{"0":{name:"Table",h:M,e:"Term.Table"},1:{name:"table_ref",b:11,type:L}});
K(N,{"0":{name:"Builtin",e:"Builtin"},1:{name:"type",b:14,defaultValue:1,type:Ta},2:{name:"attr",b:9,type:String},3:{name:"attrs",A:g,b:9,type:String},4:{name:"comparison",b:14,defaultValue:1,type:{Kb:1,oc:2,hc:3,cc:4,Sb:5,Ob:6}},5:{name:"filter",b:11,type:Ua},6:{name:"map",b:11,type:Va},7:{name:"concat_map",b:11,type:Wa},8:{name:"order_by",A:g,b:11,type:Xa},9:{name:"reduce",b:11,type:$a},10:{name:"grouped_map_reduce",b:11,type:Ya},11:{name:"range",b:11,type:Za}});
K(Ua,{"0":{name:"Filter",h:N,e:"Builtin.Filter"},1:{name:"predicate",b:11,type:ab}});K(Va,{"0":{name:"Map",h:N,e:"Builtin.Map"},1:{name:"mapping",b:11,type:O}});K(Wa,{"0":{name:"ConcatMap",h:N,e:"Builtin.ConcatMap"},1:{name:"mapping",b:11,type:O}});K(Xa,{"0":{name:"OrderBy",h:N,e:"Builtin.OrderBy"},1:{name:"attr",b:9,type:String},2:{name:"ascending",b:8,defaultValue:1,type:Boolean}});
K(Ya,{"0":{name:"GroupedMapReduce",h:N,e:"Builtin.GroupedMapReduce"},1:{name:"group_mapping",b:11,type:O},2:{name:"value_mapping",b:11,type:O},3:{name:"reduction",b:11,type:$a}});K(Za,{"0":{name:"Range",h:N,e:"Builtin.Range"},1:{name:"attrname",b:9,type:String},2:{name:"lowerbound",b:11,type:M},3:{name:"upperbound",b:11,type:M}});K($a,{"0":{name:"Reduction",e:"Reduction"},1:{name:"base",b:11,type:M},2:{name:"var1",b:9,type:String},3:{name:"var2",b:9,type:String},4:{name:"body",b:11,type:M}});
K(O,{"0":{name:"Mapping",e:"Mapping"},1:{name:"arg",b:9,type:String},2:{name:"body",b:11,type:M}});K(ab,{"0":{name:"Predicate",e:"Predicate"},1:{name:"arg",b:9,type:String},2:{name:"body",b:11,type:M}});K(ta,{"0":{name:"ReadQuery",e:"ReadQuery"},1:{name:"term",b:11,type:M},2:{name:"max_chunk_size",b:3,type:String},3:{name:"max_age",b:3,type:String}});
K(P,{"0":{name:"WriteQuery",e:"WriteQuery"},1:{name:"type",b:14,defaultValue:1,type:{Nc:1,Fb:2,nc:3,$b:4,Nb:6,xc:7,vc:8,wc:9}},2:{name:"update",b:11,type:bb},3:{name:"delete",b:11,type:cb},4:{name:"mutate",b:11,type:db},5:{name:"insert",b:11,type:eb},7:{name:"for_each",b:11,type:fb},8:{name:"point_update",b:11,type:gb},9:{name:"point_delete",b:11,type:hb},10:{name:"point_mutate",b:11,type:ib}});
K(bb,{"0":{name:"Update",h:P,e:"WriteQuery.Update"},1:{name:"view",b:11,type:M},2:{name:"mapping",b:11,type:O}});K(cb,{"0":{name:"Delete",h:P,e:"WriteQuery.Delete"},1:{name:"view",b:11,type:M}});K(db,{"0":{name:"Mutate",h:P,e:"WriteQuery.Mutate"},1:{name:"view",b:11,type:M},2:{name:"mapping",b:11,type:O}});K(eb,{"0":{name:"Insert",h:P,e:"WriteQuery.Insert"},1:{name:"table_ref",b:11,type:L},2:{name:"terms",A:g,b:11,type:M},3:{name:"overwrite",b:8,defaultValue:0,type:Boolean}});
K(fb,{"0":{name:"ForEach",h:P,e:"WriteQuery.ForEach"},1:{name:"stream",b:11,type:M},2:{name:"var",b:9,type:String},3:{name:"queries",A:g,b:11,type:P}});K(gb,{"0":{name:"PointUpdate",h:P,e:"WriteQuery.PointUpdate"},1:{name:"table_ref",b:11,type:L},2:{name:"attrname",b:9,type:String},3:{name:"key",b:11,type:M},4:{name:"mapping",b:11,type:O}});K(hb,{"0":{name:"PointDelete",h:P,e:"WriteQuery.PointDelete"},1:{name:"table_ref",b:11,type:L},2:{name:"attrname",b:9,type:String},3:{name:"key",b:11,type:M}});
K(ib,{"0":{name:"PointMutate",h:P,e:"WriteQuery.PointMutate"},1:{name:"table_ref",b:11,type:L},2:{name:"attrname",b:9,type:String},3:{name:"key",b:11,type:M},4:{name:"mapping",b:11,type:O}});K(jb,{"0":{name:"MetaQuery",e:"MetaQuery"},1:{name:"type",b:14,defaultValue:1,type:{Db:1,Ib:2,fc:3,Eb:4,Jb:5,gc:6}},2:{name:"db_name",b:9,type:String},3:{name:"create_table",b:11,type:kb},4:{name:"drop_table",b:11,type:L}});
K(kb,{"0":{name:"CreateTable",h:jb,e:"MetaQuery.CreateTable"},1:{name:"datacenter",b:9,type:String},3:{name:"table_ref",b:11,type:L},4:{name:"primary_key",b:9,defaultValue:"id",type:String},5:{name:"cache_size",b:3,defaultValue:"1073741824",type:String}});K(E,{"0":{name:"Query",e:"Query"},1:{name:"type",b:14,defaultValue:ua,type:lb},2:{name:"token",b:3,type:String},3:{name:"read_query",b:11,type:ta},4:{name:"write_query",b:11,type:P},5:{name:"meta_query",b:11,type:jb}});
K(mb,{"0":{name:"Response",e:"Response"},1:{name:"status_code",b:14,defaultValue:0,type:{Hc:0,Ic:1,Jc:2,Kc:3,yb:101,xb:102,Bc:103}},2:{name:"token",b:3,type:String},3:{name:"response",A:g,b:9,type:String},4:{name:"error_message",b:9,type:String},5:{name:"backtrace",b:11,type:nb}});K(nb,{"0":{name:"Backtrace",h:mb,e:"Response.Backtrace"},1:{name:"frame",A:g,b:9,type:String}});function y(){}p(y,sa);function ob(a){this.ab=a||""}p(ob,y);ob.prototype.compile=function(){var a=new M;a.c(5);F(a,6,this.ab);return a};ob.prototype.a=function(a){return a?"^^^^^^^^^":"r.error()"};o("rethinkdb.error",function(){return new ob});function pa(a){this.g=a}p(pa,y);pa.prototype.compile=function(){var a=new M;a.c(8);var b=JSON.stringify(this.g);F(a,9,b);return a};function ka(a){this.g="undefined"===typeof a?j:a}p(ka,y);
ka.prototype.compile=function(){var a=new M;this.g===j?a.c(0):(a.c(6),F(a,7,this.g));return a};ka.prototype.a=function(a){var b="r.expr("+this.g+")";return a?Q(b):b};function la(a){this.g=a}p(la,y);la.prototype.compile=function(){var a=new M;a.c(9);F(a,10,this.g);return a};la.prototype.a=function(a){var b="r.expr("+this.g+")";return a?Q(b):b};function ma(a){this.g=a}p(ma,y);ma.prototype.compile=function(){var a=new M;a.c(7);F(a,8,this.g);return a};
ma.prototype.a=function(a){var b="r.expr('"+this.g+"')";return a?Q(b):b};function na(a){this.g=[];for(var b=0;b<a.length;b++){var c=q(a[b]);this.g.push(c)}}p(na,y);na.prototype.compile=function(a){var b=new M;b.c(10);for(var c=0;c<this.g.length;c++){var d=this.g[c].compile(a);I(b,11,d)}return b};
na.prototype.a=function(a){var b=this.g.map(function(a){return a.a()});if(a){if(0===a.length)return Q("r.expr(["+b.join(", ")+"])");var c=a[0].split(":");a.shift();c=parseInt(c[1],10);b=b.map(R);b[c]=this.g[c].a(a);return"        "+b.join("  ")+"  "}return"r.expr(["+b.join(", ")+"])"};function oa(a){this.g={};for(var b in a)if(a.hasOwnProperty(b)){var c=q(a[b]);this.g[b]=c}}p(oa,y);
oa.prototype.compile=function(a){var b=new M;b.c(11);for(var c in this.g)if(this.g.hasOwnProperty(c)){var d=new La;d.O(c);d.ga(this.g[c].compile(a));I(b,12,d)}return b};
oa.prototype.a=function(a){var b=[],c;for(c in this.g)this.g.hasOwnProperty(c)&&b.push("'"+c+"':"+this.g[c].a());b="r.expr({"+b.join(", ")+"})";if(a){if(0===a.length)return Q(b);b=a[0].split(":");a.shift();var d=b[1],b=[];for(c in this.g)this.g.hasOwnProperty(c)&&(c===d?b.push(R("'"+c+"':")+this.g[c].a(a)):b.push(R("'"+c+"':"+this.g[c].a())));return"        "+b.join("  ")+"  "}return b};function qa(a){this.lb=a}p(qa,y);qa.prototype.compile=function(){var a=new M;a.c(14);F(a,16,this.lb);return a};
function ia(a,b){1>a.length&&a.push("");this.i=a;this.body=b}ia.prototype.a=function(a){return a?R("function("+this.i.join(", ")+") {return ")+this.body.a(a)+" ":"function("+this.i.join(", ")+") {return "+this.body.a()+"}"};
function ja(a){var b,c;if("function"===typeof a&&!(a instanceof r)){b=[];for(c=0;c<a.length;c++)b.push("arg"+b.length);c=a.apply(j,b.map(function(a){return pb(a)}));if(!(c instanceof r))throw new C("ReQL function must return ReQL expression");}else c=arguments[arguments.length-1],b=Array.prototype.slice.call(arguments,0,arguments.length-1);c=q(c);b.forEach(function(a){return u(a,"string")});return x(ia,b,c)}function S(a,b,c,d){this.Qa=a;this.ua=b;this.sa=d||j;this.a=c}p(S,y);
S.prototype.compile=function(a){var b=new N;b.c(this.Qa);this.sa&&this.sa(b);var c=new Oa;F(c,1,b);for(var d in this.ua)b=this.ua[d].compile(a),I(c,2,b);a=new M;a.c(3);F(a,4,c);return a};function qb(a,b){y.prototype[b]=function(c){w(arguments,1);c=q(c);return x(S,a,[this,c],rb(b,this,c))}}function sb(a,b){y.prototype[b]=function(c){w(arguments,1);c=q(c);return x(S,Sa,[this,c],rb(b,this,c),function(b){F(b,4,a)})}}qb(14,"add");qb(15,"sub");qb(16,"mul");qb(17,"div");qb(18,"mod");sb(1,"eq");sb(2,"ne");
sb(3,"lt");sb(4,"le");sb(5,"gt");sb(6,"ge");y.prototype.ma=function(){return x(S,1,[this],rb("not",this))};y.prototype.not=y.prototype.ma;y.prototype.count=function(){return x(S,26,[this],rb("count",this))};y.prototype.count=y.prototype.count;y.prototype.ta=function(a){w(arguments,1);a=q(a);return x(S,36,[this,a],rb("and",this,a))};y.prototype.and=y.prototype.ta;y.prototype.Ea=function(a){w(arguments,1);a=q(a);return x(S,35,[this,a],rb("or",this,a))};y.prototype.or=y.prototype.Ea;
y.prototype.Oa=function(a,b,c){w(arguments,2);a=q(a);b=q(b);u(c,"string");var d=c?c:"id";return x(S,37,[this],rb("between",this,a,b,d),function(c,h){var i=new Za;i.G(d);var l=a.compile(h);F(i,2,l);l=b.compile(h);F(i,3,l);F(c,11,i)})};y.prototype.between=y.prototype.Oa;y.prototype.append=function(a){w(arguments,1);a=q(a);return x(S,9,[this,a],rb("append",this,a))};y.prototype.append=y.prototype.append;
function tb(a,b,c){b=q(b);c=c?q(c):new pa(j);S.call(this,11,[a,b,c],function(d){if(d){var e=d[0].split(":");e[1]=parseInt(e[1],10);d.shift();return 0===e[1]?a.a(d)+R(".slice("+b.a()+(c?", "+c.a():"")+")"):1===e[1]?R(a.a()+".slice(")+b.a(d)+R((c?", "+c.a():"")+")"):R(a.a()+".slice("+b.a(d)+", ")+c.a(d)+" "}return a.a()+".slice("+b.a()+(c?", "+c.a():"")+")"})}p(tb,S);y.prototype.slice=function(a,b){w(arguments,1);return x(tb,this,a,b)};y.prototype.slice=y.prototype.slice;
y.prototype.Za=function(a){w(arguments,1);return x(tb,this,0,a)};y.prototype.limit=y.prototype.Za;y.prototype.kb=function(a){w(arguments,1);return x(tb,this,a)};y.prototype.skip=y.prototype.kb;y.prototype.eb=function(a){w(arguments,1);a=q(a);return x(S,28,[this,a],rb("nth",this,a))};y.prototype.nth=y.prototype.eb;
y.prototype.filter=function(a){var b;if("object"===typeof a&&!(a instanceof r)){var c=[],d;for(d in a)a.hasOwnProperty(d)&&c.push(ga(d).eq(ha(a[d])));b=x(ia,[""],x(S,36,c,function(a){var b=c.map(function(a){return a.a()});if(a){var d=a[0].split(":");a.shift();b=b.map(R);b[d[1]]=c[d[1]].a(a);return b.join("      ")}return b.join(").and(")}))}else b=t(a);var e=this;return x(S,20,[this],function(a){if(a){if("predicate"===a[0])return a.shift(),R(e.a()+".filter(")+b.a(a)+" ";a.shift();return e.a(a)+R(".filter("+
b.a(a)+")")}return e.a()+".filter("+b.a()+")"},function(a,c){var d=new ab;d.B(b.i[0]);d.n(b.body.compile(c));var e=new Ua;F(e,1,d);F(a,5,e)})};y.prototype.filter=y.prototype.filter;y.prototype.map=function(a){var a=t(a),b=this;return x(S,21,[this],function(c){if(c){if("arg:0"===c[0])return c.shift(),b.a(c)+R(".map("+a.a(c)+")");c.shift();return R(b.a()+".map(")+a.a(c)+" "}return b.a()+".map("+a.a()+")"},function(b,d){var e=new O;e.B(a.i[0]);e.n(a.body.compile(d));var h=new Va;h.v(e);F(b,6,h)})};
y.prototype.map=y.prototype.map;y.prototype.fb=function(a){w(arguments,1);var b=Array.prototype.slice.call(arguments,0);b.forEach(function(a){u(a,"string")});var c=this;return x(S,23,[this],function(a){var e=b.map(function(a){return"'"+a+"'"});return a?(a.shift(),c.a(a)+R(".orderby("+e.join(", ")+")")):c.a()+".orderby("+e.join(", ")+")"},function(a){for(var c=0;c<b.length;c++){var h=g,i=b[c];"-"===i[0]&&(h=k,i=i.slice(1));var l=new Xa;l.U(i);F(l,2,h);I(a,8,l)}})};y.prototype.orderby=y.prototype.fb;
y.prototype.Ua=function(a){u(a,"string");var b=a?this.map(ga(a)):this;return x(S,24,[b],function(a){return a?(a.shift(),b.a(a)+"           "):b.a()+".distinct()"})};y.prototype.distinct=y.prototype.Ua;
y.prototype.reduce=function(a,b){w(arguments,2);var a=q(a),b=t(b),c=this;return x(S,31,[this],function(d){if(d)if("reduce"===d[0]){d.shift();if("body"===d[0])return d.shift(),R(c.a()+".reduce("+a.a()+", ")+b.a(d)+" ";if("base"===d[0])return d.shift(),R(c.a()+".reduce(")+a.a(d)+R(", "+b.a()+")")}else return d.shift(),c.a(d)+R(".reduce("+a.a()+", "+b.a()+")");else return c.a()+".reduce("+a.a()+", "+b.a()+")"},function(c,e){var h=new $a,i=a.compile(e);F(h,1,i);F(h,2,b.i[0]);F(h,3,b.i[1]);h.n(b.body.compile(e));
F(c,9,h)})};y.prototype.reduce=y.prototype.reduce;
y.prototype.Wa=function(a,b,c,d){w(arguments,4);var a=t(a),b=t(b),c=q(c),d=t(d),e=this;return x(S,32,[this],function(h){var i=e.a(),l=a.a(),v=b.a(),s=c.a(),B=d.a();if(h){var ca=h.shift();if("arg:0"===ca)return e.a(h)+R(".groupedMapReduce("+l+", "+v+", "+s+", "+B+")");if("group_mapping"===ca)return R(i+".groupedMapReduce(")+a.a(h)+R(", "+v+", "+s+", "+B+")");if("value_mapping"===ca)return R(i+".groupedMapReduce("+l+", ")+b.a(h)+R(", "+s+", "+B+")");ca=h.shift();return"base"===ca?R(i+".groupedMapReduce("+
l+", "+v+", ")+c.a(h)+R(", "+B+")"):R(i+".groupedMapReduce("+l+", "+v+", "+s+", ")+d.a(h)+" "}return i+".groupedMapReduce("+l+", "+v+", "+s+", "+B+")"},function(e,i){var l=new O;l.B(a.i[0]);l.n(a.body.compile(i));var v=new O;v.B(b.i[0]);v.n(b.body.compile(i));var s=new $a,B=c.compile(i);F(s,1,B);F(s,2,d.i[0]);F(s,3,d.i[1]);s.n(d.body.compile(i));B=new Ya;F(B,1,l);F(B,2,v);F(B,3,s);F(e,10,B)})};y.prototype.groupedMapReduce=y.prototype.Wa;
y.prototype.contains=function(a){u(a,"string");var b=this;return x(S,4,[this],function(c){return c?"arg:0"===c.shift()?b.a(c)+R(".contains("+a+")"):R(b.a())+Q(".contains("+a+")"):b.a()+".contains("+a+")"},function(b){b.U(a)})};y.prototype.contains=y.prototype.contains;y.prototype.$=function(a){u(a,"string");var b=this;return x(S,2,[this],function(c){return c?"arg:0"===c[0]?(c.shift(),b.a(c)):R(b.a())+Q("('"+a+"')"):b.a()+"('"+a+"')"},function(b){b.U(a)})};y.prototype.getAttr=y.prototype.$;
y.prototype.Fa=function(){var a=Array.prototype.slice.call(arguments,0);n(a)||(a=[a]);a.forEach(function(a){u(a,"string")});var b=this;return x(S,6,[this],function(c){var d=a.map(function(a){return"'"+a+"'"});return c?(c.shift(),b.a(c)+R(".pick("+d.join(", ")+")")):b.a()+".pick("+d.join(", ")+")"},function(b){for(var d in a)I(b,3,a[d])})};y.prototype.pick=y.prototype.Fa;
y.prototype.Ia=function(a){n(a)||(a=[a]);a.forEach(function(a){u(a,"string")});var b=this;return x(S,39,[this],function(c){var d=a.map(function(a){return"'"+a+"'"});return c?(c.shift(),b.a(c)+R(".unpick("+d.join(", ")+")")):b.a()+".unpick("+d.join(", ")+")"},function(b){for(var d in a)I(b,3,a[d])})};y.prototype.unpick=y.prototype.Ia;y.prototype.gb=function(){var a=Array.prototype.slice.call(arguments,0);return this.map(function(b){return y.prototype.Fa.apply(b,a)})};y.prototype.pluck=y.prototype.gb;
y.prototype.qb=function(){var a=Array.prototype.slice.call(arguments,0);return this.map(function(b){return y.prototype.Ia.apply(b,a)})};y.prototype.without=y.prototype.qb;function ub(a){this.Ja=a}p(ub,y);ub.prototype.compile=function(){var a=new M;a.c(1);a.O(this.Ja);return a};ub.prototype.a=function(a){var b="r.letVar('"+this.Ja+"')";return a?Q(b):b};function vb(){}p(vb,y);vb.prototype.compile=function(){var a=new M;a.c(15);return a};vb.prototype.a=function(a){return a?"^^^^^^^^":"r.R('@')"};
function wb(a,b){S.call(this,2,[a],function(c){return c?"arg:0"===c.shift()?a.a(c)+"('"+b+"')":R(a.a())+Q("('"+b+"')"):a.a()+"('"+b+"')"},function(a){a.U(b)})}p(wb,S);function ga(a){u(a,"string");var a=a.split("."),b=a.shift();"@"===b[0]&&1<b.length?a.unshift(b.slice(1)):"@"!==b[0]&&a.unshift(b);for(var c=x(vb);b=a.shift();)c=x(wb,c,b);return c}o("rethinkdb.R",ga);function pb(a){u(a,"string");for(var a=a.split("."),b=a.shift(),c=x(ub,b);b=a.shift();)c=x(wb,c,b);return c}o("rethinkdb.letVar",pb);
y.prototype.extend=function(a){var a=q(a),b=this;return x(S,8,[this,a],function(c){return c?"arg:0"===c.shift()?b.a(c)+R(".extend("+a.a()+")"):R(b.a()+".extend(")+a.a(c)+" ":b.a()+".extend("+a.a()+")"})};y.prototype.extend=y.prototype.extend;
y.prototype.Ra=function(a){var a=t(a),b=this;return x(S,22,[this],function(c){return c?"arg:0"===c.shift()?b.a(c)+R(".concatMap("+a.a()+")"):R(b.a()+".concatMap(")+a.a(c)+" ":b.a()+".concatMap("+a.a()+")"},function(b,d){var e=new O;e.B(a.i[0]);e.n(a.body.compile(d));var h=new Wa;h.v(e);F(b,7,h)})};y.prototype.concatMap=y.prototype.Ra;function xb(a,b,c){this.ha=a;this.ia=b;this.Z=c}p(xb,y);
xb.prototype.compile=function(a){var b=new Pa,c=this.ha.compile(a);F(b,1,c);c=this.ia.compile(a);F(b,2,c);a=this.Z.compile(a);F(b,3,a);a=new M;a.c(4);F(a,5,b);return a};xb.prototype.a=function(a){if(a){var b=a.shift(),c=R(this.ha.a()),d=R(this.ia.a()),e=R(this.Z.a());"test"===b?c=this.ha.a(a):"true"===b?d=this.ia.a(a):e=this.Z.a(a);return"             "+c+"  "+d+"  "+e+" "}return"r.ifThenElse("+this.ha.a()+", "+this.ia.a()+", "+this.Z.a()+")"};
o("rethinkdb.ifThenElse",function(a,b,c){u(b,r);u(c,r);a=q(a);return x(xb,a,b,c)});function yb(a,b){this.ja=a;this.Pa=b}p(yb,y);yb.prototype.compile=function(a){var b=new Na,c;for(c in this.ja)if(this.ja.hasOwnProperty(c)){var d=this.ja[c],e=new La;e.O(c);e.ga(d.compile(a));I(b,1,e)}a=this.Pa.compile(a);F(b,2,a);a=new M;a.c(2);F(a,3,b);return a};o("rethinkdb.let",function(a,b){u(b,r);for(var c in a)a.hasOwnProperty(c)&&u(a[c],y);return x(yb,a,b)});function zb(a,b){this.Ya=a;this.za=b}p(zb,r);
zb.prototype.k=function(a){var b=new fb,c=this.Ya.compile(a);F(b,1,c);b.O(this.za.i[0]);a=this.za.body.k(a);a=H(a,4);if(!a)throw new C("For each requires a write query to execute");I(b,3,a);a=new P;a.c(6);F(a,7,b);b=new E;b.c(2);F(b,4,a);return b};y.prototype.forEach=function(a){a=t(a);return x(zb,this,a)};y.prototype.forEach=y.prototype.forEach;y.prototype.mb=function(){var a=this;return x(S,29,[this],function(b){return b?(b.shift(),a.a(b)+"                "):a.a()+".streamToArray()"})};
y.prototype.streamToArray=y.prototype.mb;y.prototype.Na=function(){var a=this;return x(S,30,[this],function(b){return b?(b.shift(),a.a(b)+"                "):a.a()+".arrayToStream()"})};y.prototype.arrayToStream=y.prototype.Na;function z(a,b,c){this.r=a;this.D=b;this.Ma="boolean"===typeof c?c:j}p(z,y);z.prototype.compile=function(a){var b=new M;b.c(13);var c=new Ra,d=new L;d.V(this.D||A.D);F(d,2,this.r);F(d,3,this.Ma!==j?this.Rc:a&&a.xa!==f?a.xa:k);c.o(d);F(b,15,c);return b};z.prototype.a=function(a){return a?this.D?Q("r.db("+this.D+").table("+this.r+")"):Q("r.table("+this.r+")"):this.D?"r.db("+this.D+").table("+this.r+")":"r.table("+this.r+")"};function Ab(a,b){this.s=a;this.z=b}p(Ab,y);
Ab.prototype.compile=function(a){var b=this.s.compile(a),c=H(b,15).t(),b=new Qa;b.o(c);b.G("id");b.I(this.z.compile(a));a=new M;a.c(12);F(a,14,b);return a};z.prototype.get=function(a){w(arguments,1);a=q(a);return x(Ab,this,a)};z.prototype.get=z.prototype.get;function Bb(a,b){this.s=a;this.ya=b}p(Bb,r);Bb.prototype.k=function(a){var b=this.s.compile(a),c=H(b,15).t(),b=new eb;b.o(c);for(c=0;c<this.ya.length;c++){var d=this.ya[c].compile(a);I(b,2,d)}a=new P;a.c(4);F(a,5,b);b=new E;b.c(2);F(b,4,a);return b};
z.prototype.Xa=function(a){w(arguments,1);n(a)||(a=[a]);a=a.map(ha);return new Bb(this,a)};z.prototype.insert=z.prototype.Xa;function Cb(a){this.X=a}p(Cb,r);Cb.prototype.k=function(a){var b=new cb;b.W(this.X.compile(a));a=new P;a.c(2);F(a,3,b);b=new E;b.c(2);F(b,4,a);return b};function Db(a,b){this.s=a;this.z=b}p(Db,r);Db.prototype.k=function(a){var b=new hb;b.o(Ma(this.s.compile(a)).t());b.G("id");b.I(this.z.compile(a));a=new P;a.c(8);F(a,9,b);b=new E;b.c(2);F(b,4,a);return b};
y.prototype.Sa=function(){return this instanceof Ab?new Db(this.s,this.z):new Cb(this)};y.prototype.del=y.prototype.Sa;function Eb(a,b){this.X=a;this.u=b}p(Eb,r);Eb.prototype.k=function(a){var b=new O;b.B(this.u.i[0]);b.n(this.u.body.compile(a));var c=new bb;c.W(this.X.compile(a));c.v(b);a=new P;a.c(1);F(a,2,c);c=new E;c.c(2);F(c,4,a);return c};function Fb(a,b,c){this.s=a;this.z=b;this.u=c}p(Fb,r);
Fb.prototype.k=function(a){var b=new O;b.B(this.u.i[0]);b.n(this.u.body.compile(a));var c=new gb;c.o(Ma(this.s.compile(a)).t());c.G("id");c.I(this.z.compile(a));c.v(b);a=new P;a.c(7);F(a,8,c);c=new E;c.c(2);F(c,4,a);return c};y.prototype.update=function(a){w(arguments,1);a=t(a);return this instanceof Ab?new Fb(this.s,this.z,a):new Eb(this,a)};y.prototype.update=y.prototype.update;function Gb(a,b){this.X=a;this.u=b}p(Gb,r);
Gb.prototype.k=function(a){var b=new O;b.B(this.u.i[0]);b.n(this.u.body.compile(a));var c=new db;c.W(this.X.compile(a));c.v(b);a=new P;a.c(3);F(a,4,c);c=new E;c.c(2);F(c,4,a);return c};function Hb(a,b,c){this.s=a;this.z=b;this.u=c}p(Hb,r);Hb.prototype.k=function(a){var b=new O;b.B(this.u.i[0]);b.n(this.u.body.compile(a));var c=new ib;c.o(Ma(this.s.compile(a)).t());c.G("id");c.I(this.z.compile(a));c.v(b);a=new P;a.c(9);F(a,10,c);c=new E;c.c(2);F(c,4,a);return c};
y.prototype.bb=function(a){w(arguments,1);a=t(a);return this instanceof Ab?new Hb(this.s,this.z,a):new Gb(this,a)};y.prototype.mutate=y.prototype.bb;function Ib(a){this.name="Runtime Error";this.message=a||"The RDB runtime experienced an error"}p(Ib,Error);function Jb(a){this.name="Broken Client";this.message=a||"The client sent the server an incorrectly formatted message"}p(Jb,Error);function Kb(a){this.name="Bad Query";this.message=a||"This query contains type errors"}p(Kb,Error);function C(a){this.name="RDB Client Error";this.message=a||"The RDB client has experienced an error"}p(C,Error);
function rb(a,b,c){var d=Array.prototype.slice.call(arguments,2);return function(c){var h=d.map(function(a){return a instanceof r?a.a():a.toString()}),i=b.a()+"."+a+"("+h.join(", ")+")";if(c){if(0===c.length)return Q(i);var l=c[0].split(":");c.shift();if("arg"===l[0])return l[1]=parseInt(l[1],10),h=h.map(R),0===l[1]?i=b.a(c):(i=R(b.a()),l=l[1]-1,c=d[l].a(c),h[l]=c),h=h.join("  "),i+" "+R(a)+" "+h+" "}else return i}}function R(a){return a.replace(/./g," ")}
function Q(a){return a.replace(/./g,"^")};function Lb(){}Lb.prototype.Aa=function(a,b){return 11==a.m||10==a.m?Mb(this,b):b};function Nb(a,b){this.f=a|0;this.d=b|0}var Ob={};function Pb(a){if(-128<=a&&128>a){var b=Ob[a];if(b)return b}b=new Nb(a|0,0>a?-1:0);-128<=a&&128>a&&(Ob[a]=b);return b}function T(a){return isNaN(a)||!isFinite(a)?Qb:a<=-Rb?U:a+1>=Rb?Sb:0>a?V(T(-a)):new Nb(a%Tb|0,a/Tb|0)}function W(a,b){return new Nb(a,b)}var Tb=4294967296,Rb=Tb*Tb/2,Qb=Pb(0),Ub=Pb(1),Vb=Pb(-1),Sb=W(-1,2147483647),U=W(0,-2147483648),Wb=Pb(16777216);m=Nb.prototype;
m.toString=function(a){a=a||10;if(2>a||36<a)throw Error("radix out of range: "+a);if(Xb(this))return"0";if(0>this.d){if(this.j(U)){var b=T(a),c=Yb(this,b),b=Zb(c.multiply(b),this);return c.toString(a)+b.f.toString(a)}return"-"+V(this).toString(a)}for(var c=T(Math.pow(a,6)),b=this,d="";;){var e=Yb(b,c),h=Zb(b,e.multiply(c)).f.toString(a),b=e;if(Xb(b))return h+d;for(;6>h.length;)h="0"+h;d=""+h+d}};function $b(a){return 0<=a.f?a.f:Tb+a.f}function Xb(a){return 0==a.d&&0==a.f}
m.j=function(a){return this.d==a.d&&this.f==a.f};function ac(a,b){if(a.j(b))return 0;var c=0>a.d,d=0>b.d;return c&&!d?-1:!c&&d?1:0>Zb(a,b).d?-1:1}function V(a){return a.j(U)?U:a.ma().add(Ub)}m.add=function(a){var b=this.d>>>16,c=this.d&65535,d=this.f>>>16,e=a.d>>>16,h=a.d&65535,i=a.f>>>16,l;l=0+((this.f&65535)+(a.f&65535));a=0+(l>>>16);a+=d+i;d=0+(a>>>16);d+=c+h;c=0+(d>>>16);return W((a&65535)<<16|l&65535,(c+(b+e)&65535)<<16|d&65535)};function Zb(a,b){return a.add(V(b))}
m.multiply=function(a){if(Xb(this)||Xb(a))return Qb;if(this.j(U))return 1==(a.f&1)?U:Qb;if(a.j(U))return 1==(this.f&1)?U:Qb;if(0>this.d)return 0>a.d?V(this).multiply(V(a)):V(V(this).multiply(a));if(0>a.d)return V(this.multiply(V(a)));if(0>ac(this,Wb)&&0>ac(a,Wb))return T((this.d*Tb+$b(this))*(a.d*Tb+$b(a)));var b=this.d>>>16,c=this.d&65535,d=this.f>>>16,e=this.f&65535,h=a.d>>>16,i=a.d&65535,l=a.f>>>16,a=a.f&65535,v,s,B,ca;ca=0+e*a;B=0+(ca>>>16);B+=d*a;s=0+(B>>>16);B=(B&65535)+e*l;s+=B>>>16;s+=c*a;
v=0+(s>>>16);s=(s&65535)+d*l;v+=s>>>16;s=(s&65535)+e*i;v+=s>>>16;return W((B&65535)<<16|ca&65535,(v+(b*a+c*l+d*i+e*h)&65535)<<16|s&65535)};
function Yb(a,b){if(Xb(b))throw Error("division by zero");if(Xb(a))return Qb;if(a.j(U)){if(b.j(Ub)||b.j(Vb))return U;if(b.j(U))return Ub;var c=Yb(bc(a,1),b).shiftLeft(1);if(c.j(Qb))return 0>b.d?Ub:Vb;var d=Zb(a,b.multiply(c));return c.add(Yb(d,b))}if(b.j(U))return Qb;if(0>a.d)return 0>b.d?Yb(V(a),V(b)):V(Yb(V(a),b));if(0>b.d)return V(Yb(a,V(b)));for(var e=Qb,d=a;0<=ac(d,b);){for(var c=Math.max(1,Math.floor((d.d*Tb+$b(d))/(b.d*Tb+$b(b)))),h=Math.ceil(Math.log(c)/Math.LN2),h=48>=h?1:Math.pow(2,h-48),
i=T(c),l=i.multiply(b);0>l.d||0<ac(l,d);)c-=h,i=T(c),l=i.multiply(b);Xb(i)&&(i=Ub);e=e.add(i);d=Zb(d,l)}return e}m.ma=function(){return W(~this.f,~this.d)};m.ta=function(a){return W(this.f&a.f,this.d&a.d)};m.Ea=function(a){return W(this.f|a.f,this.d|a.d)};function cc(a,b){return W(a.f^b.f,a.d^b.d)}m.shiftLeft=function(a){a&=63;if(0==a)return this;var b=this.f;return 32>a?W(b<<a,this.d<<a|b>>>32-a):W(0,b<<a-32)};
function bc(a,b){b&=63;if(0==b)return a;var c=a.d;return 32>b?W(a.f>>>b|c<<32-b,c>>b):W(c>>b-32,0<=c?0:-1)};function dc(a){for(var b=[],c=0;c<a.length;c++)b.push(String.fromCharCode(a[c]));return b.join("")}function ec(a){return new Uint8Array(Array.prototype.map.call(a,function(a){return a.charCodeAt(0)}))}function fc(){this.q=0}p(fc,Lb);function X(a){throw new va("Error deserializing incorrectly formated message, "+a);}
function Mb(a,b){for(var c=Ga(b.aa()),d=[],e=0,h=0;h<c.length;h++){var i=c[h];if(Ha(b,i.p)){var l=0;do{var v=a.Aa(i,b.get(i,l));d.push(v);e+=v.byteLength;l++}while(i.Q&&l<Ka(b,i.p))}}c=new Uint8Array(e);for(h=e=0;h<d.length;h++)i=d[h],c.set(new Uint8Array(i),e),e+=i.byteLength;return c}
fc.prototype.Aa=function(a,b){var c=a.m,d=gc[c],e=hc(T(a.p<<3|d)),h;switch(d){case Y:var i=T(b);if(c==Ba||17==c)i=cc(i.shiftLeft(1),bc(i,63));h=hc(i);break;case ic:i=new ArrayBuffer(8);c=new DataView(i);switch(a.m){case 1:c.setFloat64(0,b,g);break;case za:h=T(b);c.setUint32(0,$b(h),g);c.setUint32(4,h.d,g);break;case Aa:h=T(b);c.setUint32(0,$b(h),g);c.setInt32(4,h.d,g);break;default:X("Unexpected field type")}h=new Uint8Array(i);break;case jc:switch(a.m){case 11:i=Mb(this,b);break;case 9:i=ec(unescape(encodeURIComponent(b)));
break;case 12:i=ec(b);break;default:X("Unexpected field type")}h=i.length;c=hc(T(h));h=new Uint8Array(c.length+h);h.set(c,0);h.set(i,c.length);break;case kc:X("Use of Groups deprecated and not supported");break;case lc:i=new ArrayBuffer(4);c=new DataView(i);switch(a.m){case 2:c.setFloat32(0,b,g);break;case 7:c.setUint32(0,b,g);break;case 15:c.setInt32(0,b,g);break;default:X("Unexpected field type")}h=new Uint8Array(i);break;default:X("Unexpected wire type")}i=new Uint8Array(e.length+h.length);i.set(new Uint8Array(e),
0);i.set(new Uint8Array(h),e.length);return i};function hc(a){function b(a){var d=T(128),d=Zb(a,Yb(a,d).multiply(d)).f,e=T(127);0<ac(a,e)?(d+=128,a=b(bc(a,7)),a.unshift(d)):a=[d];return a}a=b(a);return new Uint8Array(a)}
function mc(a,b,c){var d=b.aa();for(a.q=0;a.q<c.length;){var e=nc(a,c),h=d.F[parseInt(e>>3,10)]||j,i=a,l=e%8,v=h,e=c,s=f;switch(l){case Y:e=nc(i,e);if(v){i=f;switch(v.m){case xa:case ya:i=e.toString();break;case 5:case 13:case 14:i=e;break;case 17:e=T(e);i=cc(bc(e,1),e.shiftLeft(63)).f;break;case Ba:e=T(e);i=cc(bc(e,1),e.shiftLeft(63)).toString();break;case 8:i=0===i?k:g;break;default:X("Unexpected field type")}s=i}else s=j;break;case jc:l=e;e=nc(i,l);l=new Uint8Array(l.buffer,l.byteOffset+i.q,e);
i.q+=e;if(v){e=f;switch(v.m){case 9:e=decodeURIComponent(escape(dc(l)));break;case 12:e=dc(l);break;case 11:e=l;i=new fc;v=new v.Da.K.$a;mc(i,v,e);e=v;break;default:X("Unexpected field type")}s=e}else s=j;break;case lc:e=new DataView(e.buffer,i.q,4);i.q+=4;if(v){i=f;switch(v.m){case 2:i=e.getFloat32(0,g);break;case 7:i=e.getUint32(0,g);break;case 15:i=e.getInt32(0,g);break;default:X("Unexpected field type")}s=i}else s=j;break;case ic:e=new DataView(e.buffer,i.q,8);i.q+=8;if(v){i=f;switch(v.m){case 1:i=
e.getFloat64(0,g);break;case za:i=(new Nb(e.getUint32(0,g),e.getUint32(4,g))).toString();break;case Aa:i=(new Nb(e.getUint32(0,g),e.getInt32(4,g))).toString();break;default:X("Unexpected field type")}s=i}else s=j;break;default:X("Unexpected wire type of "+l)}e=s;h!=j&&e!=j&&(h.Q?b.add(h,e):b.set(h,e))}}function nc(a,b){var c=b[a.q++];if(127<c)var c=c-128,d=nc(a,b),c=c+(d<<7);return c}var Y=0,ic=1,jc=2,kc=3,lc=5,gc=[-1,ic,lc,Y,Y,Y,ic,lc,Y,jc,kc,jc,jc,Y,Y,lc,ic,Y,Y];function D(a,b){"undefined"===typeof a?a={}:"string"===typeof a&&(a={host:a});this.ba=a.host||this.La;this.da=a.port||this.ra;this.D=a.db||this.Ka;u(this.ba,"string");u(this.da,"number");u(this.D,"string");this.S={};this.cb=1;this.Y=b||j;A=this}D.prototype.La="localhost";D.prototype.ra=12346;D.prototype.Ka="test";D.prototype.ib=function(a){this.constructor.call(this,{host:this.ba,port:this.da,db:this.D},a,this.Y)};D.prototype.reconnect=D.prototype.ib;
function Z(a,b){if(a.Y)a.Y(b);else if(a.oa)console.log(b.name+":"+b.message);else throw b;}D.prototype.jb=function(a){this.Y=a};D.prototype.setErrorHandler=D.prototype.jb;
function oc(a,b){var c={expr:ha(j),callback:function(){},iterate:k,doneCallback:function(){},allowOutdated:k};ra(c,b);u(c.expr,r);u(c.callback,"function");u(c.iterate,"boolean");u(c.doneCallback,"function");u(c.allowOutdated,"boolean");var d=c.expr.k({xa:c.allowOutdated});d.pa((a.cb++).toString());a.S[d.M()]={l:c.callback,hb:c.expr,R:c.iterate,L:c.doneCallback,na:[]};pc(a,d)}
function pc(a,b){var c=Mb(new fc,b),d=c.byteLength,e=new Uint8Array(d+4);(new DataView(e.buffer)).setInt32(0,d,g);e.set(c,4);a.Ha(e.buffer)}D.prototype.ea=function(a,b){w(arguments,1);this.oa=k;var c={};a instanceof r?(c.expr=a,c.callback=b):ra(c,a);oc(this,c)};D.prototype.run=D.prototype.ea;D.prototype.fa=function(a){w(arguments,1);this.oa=g;var b={};a instanceof r?b.expr=a:ra(b,a);b.callback=function(a){console.log(a)};oc(this,b)};D.prototype.runp=D.prototype.fa;
D.prototype.ca=function(a,b,c){w(arguments,1);this.oa=k;var d={};a instanceof r?(d.expr=a,d.callback=b,d.doneCallback=c):ra(d,a);d.iterate=g;oc(this,d)};D.prototype.iter=D.prototype.ca;
function qc(a,b){(new DataView(b.buffer)).getUint32(0,g)!==b.length-4&&Z(a,new C("RDB response corrupted, length inaccurate"));var c=new fc,d=new mb;try{mc(c,d,new Uint8Array(b.buffer,4))}catch(e){Z(a,new C("response deserialization failed"))}var h=H(d,1);if(c=a.S[d.M()])switch(h){case 101:Z(a,new Jb(H(d,4)));break;case 103:var c=c.hb,h=H(d,4),d=H(d,5),i=[];d&&(i=Ja(d,1));d=h+"\n\t"+c.a()+"\n\t"+c.a(i);Z(a,new Ib(d));break;case 102:Z(a,new Kb(H(d,4)));break;case 0:delete a.S[d.M()];c.R?c.L&&c.L():
c.l&&c.l();break;case 3:delete a.S[d.M()];d=Ja(d,3).map(JSON.parse);c.l&&(c.R?d.forEach(c.l):c.l(c.na.concat(d)));c.L&&c.R&&c.L();break;case 1:delete a.S[d.M()];d=JSON.parse(H(d,3,0));c.R?(d.forEach&&c.l?d.forEach(c.l):c.l&&c.l(d),c.L&&c.L()):c.l&&c.l(d);break;case 2:h=new E;h.c(3);h.pa(d.Ba());pc(a,h);d=Ja(d,3).map(JSON.parse);c.l&&(c.R?d.forEach(c.l):c.na=c.na.concat(d));break;default:Z(a,new C("unknown response status code"))}};function rc(a,b){this.pb=a;this.J=b||j}p(rc,r);rc.prototype.k=function(){var a=new jb;a.c(this.pb);this.J&&a.V(this.J);var b=new E;b.c(5);F(b,5,a);return b};o("rethinkdb.dbCreate",function(a){w(arguments,1);u(a,"string");return new rc(1,a)});o("rethinkdb.dbDrop",function(a){w(arguments,1);u(a,"string");return new rc(2,a)});o("rethinkdb.dbList",function(){return new rc(3)});function $(a){this.r=a}o("rethinkdb.db",function(a){w(arguments,1);u(a,"string");return new $(a)});
$.prototype.list=function(){return new rc(6,this.r)};$.prototype.list=$.prototype.list;function sc(a,b,c,d,e){this.wa=a;this.J=b;this.qa=c;this.Ga=d;this.va=e}p(sc,r);sc.prototype.k=function(){var a=new L;a.V(this.J);F(a,2,this.qa);var b=new kb;this.wa&&F(b,1,this.wa);b.o(a);this.Ga&&F(b,4,this.Ga);this.va&&F(b,5,this.va);a=new jb;a.c(4);F(a,3,b);b=new E;b.c(5);F(b,5,a);return b};
$.prototype.create=function(a){w(arguments,1);var b={};"string"===typeof a?b.tableName=a:b=a;u(b.tableName,"string");u(b.primaryKey,"string");u(b.dataCenter,"string");u(b.cacheSize,"string");return new sc(b.dataCenter,this.r,b.tableName,b.primaryKey,b.cacheSize)};$.prototype.create=$.prototype.create;function tc(a,b){w(arguments,1);this.J=a;this.qa=b}p(tc,r);tc.prototype.k=function(){var a=new L;a.V(this.J);F(a,2,this.qa);var b=new jb;b.c(5);F(b,4,a);a=new E;a.c(5);F(a,5,b);return a};
$.prototype.Va=function(a){w(arguments,1);u(a,"string");return new tc(this.r,a)};$.prototype.drop=$.prototype.Va;$.prototype.nb=function(a,b){w(arguments,1);u(a,"string");u(b,"boolean");return new z(a,this.r,b)};$.prototype.table=$.prototype.nb;function uc(a,b,c){u(b,"function");u(c,"function");D.call(this,a,c);this.P="";var d=this,e="http://"+this.ba+":"+this.da+"/ajax/reql/",h=new XMLHttpRequest;h.responseType="arraybuffer";h.open("GET",e+"open-new-connection",g);h.onreadystatechange=function(){4===h.readyState&&(200===h.status?(d.P=e,d.ka=(new DataView(h.response)).getInt32(0,g),b&&b(d)):Z(d,new C("Unabled to establish HTTP connection")))};h.send()}p(uc,D);o("rethinkdb.HttpConnection",uc);uc.prototype.ra=21300;
uc.prototype.Ha=function(a){this.P||Z(this,new C("Connection not open"));var b=new XMLHttpRequest;b.responseType="arraybuffer";b.open("POST",this.P+"?conn_id="+this.ka,g);var c=this;b.onreadystatechange=function(){4===b.readyState&&200===b.status&&qc(c,new Uint8Array(b.response))};b.send(a)};uc.prototype.close=function(){this.P||Z(this,new C("Connection not open"));var a=new XMLHttpRequest;a.open("POST",this.P+"close-connection?conn_id="+this.ka,g);a.send();this.P=this.ka=j};uc.prototype.close=uc.prototype.close;function vc(a,b,c){wc()||Z(this,new C("Cannot instantiate TcpConnection, TCP sockets are not available in this environment."));u(b,"function");u(c,"function");D.call(this,a,c);this.N=j;this.Xc=0;this.C=j;var d=this;d.C=j;var e=require("net").connect(this.da,this.ba,function(){e.write("35ba61af","hex");e.on("data",fa(d.ob,d));e.on("end",function(){d.C=j;Z(d,new Ib("Server disconnected"))});d.C=e;b&&b(d)});e.on("error",function(){Z(d,new C("Unabled to establish TCP connection"))})}p(vc,D);
o("rethinkdb.TcpConnection",vc);function wc(){return"undefined"!==typeof require&&require("net")}vc.isAvailable=wc;vc.prototype.Ha=function(a){this.C||Z(this,new C("Connection not open"));for(var b=new Buffer(a.byteLength),c=new Uint8Array(a),d=0;d<a.byteLength;d++)b[d]=c[d];this.C.write(b)};
vc.prototype.ob=function(a){for(var a=new Uint8Array(a),b=0,c=a.byteLength;0<c;){if(this.N===j){var d=(new DataView(a.buffer,b,c)).getUint32(0,g);this.N=new Uint8Array(d+4);this.T=0}var d=this.N.byteLength-this.T,e=c<d?c:d,h=new Uint8Array(a.buffer,b,e);this.N.set(h,this.T);this.T+=e;b+=e;c-=e;d-=e;0>=d&&(d=this.N,this.N=j,this.T=0,qc(this,d))}};
vc.prototype.close=function(){this.C||Z(this,new C("Connection not open"));var a=this;this.C.removeAllListeners("end");this.C.on("close",function(){a.C=j});this.C.end()};vc.prototype.close=vc.prototype.close;o("rethinkdb.connect",function(a,b,c){return wc()?new vc(a,b,c):new uc(a,b,c)});var A=j;o("rethinkdb.getLastConnection",function(){return A});"undefined"!==typeof exports&&("undefined"!==typeof module&&module.exports?exports=module.exports=aa.rethinkdb:exports.rethinkdb=aa.rethinkdb);
}).call(this);
