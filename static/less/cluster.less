@import "bootstrap/bootstrap.less";

/* Colors */
@riak_color: #1693A5;
@memcached_color: #44AA55;
@selected_color: #FCFBE3;
@link_color: #0069D6;
@light_red: #FFDEDB;
@light_yellow: #FFE6B3;
@light_green: #CDE9CA;

/* Clear utility */
.clearboth { clear: both; }
.clearleft { clear: left; }
.clearright { clear: right; }

/* Border radius, box shadow, gradient */
@border_radius: 3px;
@panel_border: thin solid #DDD;

.uuid {
    font-family: monospace;
}

.drop-shadow() {
.box-shadow(0 1px 2px @grayLighter);
}

.panel-gradient() {
    #gradient > .vertical(rgba(255,255,255,1), rgba(246,246,246,1));
}

/* Temporary fix for bug introduced in Bootstrap 2.0.2 for the navbar width. */
.navbar-inner .container {
    width: 940px;
}

/*
    ----------------------------
    Development tools
    ----------------------------
*/

#dev-tools {
    display: none;
    #translucent > .background(#000, 0.1);
    border: thin solid #BBB;
    padding: 10px 15px 20px 30px;
    position: absolute;
    right: 0;
    width: 190px;
    z-index: 1000;
    .btn {
        line-height: 16px;
        margin: 5px 0px;
        padding-top: 8px;
        padding-bottom: 8px;
        text-align: center;
        width: 150px;
    }
}

/*
    ----------------------------
    Log view
    ----------------------------
*/

.log-view {
    .header h1 {
        margin-bottom: 15px;
    }

    ul.log-entries {
        margin-left: 0;

        li.log-entry {
            list-style-type: none;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: thin solid @grayLighter;

            p { margin-bottom: 0; }

            .entry-metadata {
                p {
                    text-transform: uppercase;
                    color: @gray;
                    text-align: left;
                    font-size: 0.75em;
                    margin-bottom: 0;
                }
                margin-bottom: 6px;
            }

            p.level {
                text-transform: uppercase;
                color: @gray;
                font-size: 0.75em;
                float: left;
            }

            p.message {
                margin-left: 50px;
                a.json {
                    text-transform: uppercase;
                    font-size: 0.75em;
                    color: @gray;
                    border-bottom: thin dotted @gray;
                    &:hover {
                        border-bottom: none;
                    }
                }
            }
        }
    }

    .any-more-log-entries {
        margin-top: 20px;
        margin-bottom: 40px;
        .no-more-entries {
            display: none;
            text-align: center;
            font-weight: bold;
            background: @grayLighter;
            padding: 15px;
            border: thin solid #CCC;
        }
        .next-log-entries {
            font-size: 1.2em;
            text-align: right;
        }
    }
}

/*
    ----------------------------
    Sidebar
    ----------------------------
*/

#sidebar {
    border-left: thin solid @grayLighter;
    padding-left: 20px;
    margin-top: 52px;

    h3 {
        line-height: 1em;
        margin-bottom: 1em;
    }

    .section {
        padding: 15px;
        margin-bottom: 20px;
        &.last { margin-bottom: 0 }
        &.cluster-status {
            background: #FEFBF3;
            border: thin solid lighten(@black, 80%);
            .border-radius(3px 3px 3px 3px);

            .resolve-issues {
                margin-top: 10px;
                margin-bottom: 0;
            }
            hr {
                border-bottom: thin solid @grayLight;
                margin: 15px 0;
            }
            .connectivity-info {
                margin-top: 0.75em;
                p.metrics {
                }
                p.more-details {
                    margin-bottom: 0;
                }
            }
        }
    }

    h5 {
        text-transform: uppercase;
        font-size: 0.85em;
        font-weight: bold;
        line-height: 2em;

        &.connection { color: @blue; }
        &.connected-to {
            margin-left: 10px;
            line-height: 1.6em;
        }
        &.cluster { color: darken(@green, 30%); }
        &.critical { color: @red; }
        &.other { color: darken(@purple, 20%); }
        &.no-issues { color: darken(@green, 20%); }
    }

    .issue {
        padding: 8px 0px;

        .message {
            display: table-cell;
            height: 28px;
            overflow: hidden;
            padding: 0 0;
            vertical-align: middle;
            width: 100%;
        }

        .priority {
            width: 24px;
            height: 24px;
            float: left;
            margin-top: 4px;
            margin-bottom: 4px;
            margin-right: 15px;
        }

        &.critical .priority {
            background: url('/images/alert-icon_small.png') no-repeat center center;
        }

        &.other .priority {
            background: url('/images/information-icon_small.png') no-repeat center center;
        }
    }

    .recent-log-entry {
        padding: 7px 0px;

        .level {
            width: 24px;
            height: 24px;
            float: left;
            margin-top: 4px;
            margin-bottom: 4px;
            margin-right: 15px;
            &.error {
                background: url('/images/alert-icon_small.png') no-repeat center center;
            }
            &.info, &.debug {
                background: url('/images/information-icon_small.png') no-repeat center center;
            }
        }

        .message {
            display: table-cell;
            height: 32px;
            overflow: hidden;
            padding: 0 0;
            vertical-align: middle;
            width: 100%;
            a.json {
                text-transform: uppercase;
                font-size: 0.75em;
                color: @gray;
                border-bottom: thin dotted @gray;
                &:hover {
                    border-bottom: none;
                }
            }
        }

        .datetime, .from-machine {
            color: @gray;
            text-align: right;
            text-transform: uppercase;
            font-size: 0.75em;
            margin-bottom: 0;
        }
    }
}

/*
    ----------------------------
    Resolve issues view
    ----------------------------
*/
#cluster > .resolve-issues {
    .no-issues {
        margin-top: 15px;
        font-size: 1.4em;
        color: @grayLight
    }
    .btn { margin-top: 10px; }
    .issue {
        margin: 20px 0px;
        padding: 15px 25px;
        background: #FEFBF3;
        border: thin solid lighten(@black, 80%);
        .border-radius(3px 3px 3px 3px);

        &.critical .header { background: url('/images/critical-issue_small.png') left top no-repeat; }

        .header {
            margin-top: 3px;
            min-height: 32px;
            h3 {
                line-height: 1em;
            }
            h3, .datetime {
                margin-left: 35px;
            }
        }

        hr {
            margin: 0 0 12px;
            border-bottom: 1px solid @grayLight;
        }

        .datetime {
            font-weight: normal;
            font-size: 0.75em;
            color: @gray;
            text-transform: uppercase;
            padding-top: 3px;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .details {
            margin-top: 5px;
            margin-bottom: 5px;
            list-style: square;

            li {
                line-height: 1.8em;
                color: @grayDark;
            }
        }

        &.name-conflict, &.vclock-conflict {
            h4 {
                margin-bottom: 5px;
            }
        }
    }
}

/*
    ----------------------------
    Events view
    ----------------------------
*/

.events-view {
    .events { padding-top: 10px; }
    .event {
        border-bottom: thin solid @grayLighter;
        padding-bottom: 20px;
        margin-bottom: 20px;
        .datetime {
            color: @gray;
            font-size: 1.5em;
            float: left;
            width: 40%;
        }

        .message {
            color: @grayDark;
            font-size: 1.5em;
            float: right;
            width: 60%;
        }
    }
}

/*
    ----------------------------
    Alerts dropdown
    ----------------------------
*/

/*#alerts-dropdown  {
    .bordered {
        border-bottom: thin solid @grayLighter;
    }

    .header {
        padding: 5px 15px;
        .bordered;
    }

    .footer {
        padding: 10px 15px;
        font-size: 1.2em;
        text-align: center;
        a { font-weight: bold; }
        .bordered;
    }

    .alert {
        background: #F5F5F5;
        color: #666;
        height: 32px;
        padding: 15px;
        cursor: pointer;
        .bordered;

        div {
            display: table-cell;
            height: 32px;
            overflow: hidden;
            padding: 0 0;
            vertical-align: middle;
            width: 100%;
            &.goto {
                padding-left: 5px;
                font-size: 2em;
            }
        }

        img {
            float: left;
            margin-top: 4px;
            margin-bottom: 4px;
            margin-right: 15px;
        }

        &.new {
            background: #FFF;
            color: #404040;
            .element {
                font-weight: bold;
            }
        }
    }
*/
    /* Override Bootstrap */
/*    padding: 0;
    max-width: 600px;
    width: 350px;
    background-color: @white;

    .border-radius(0 0 0 0);

    a {
        text-shadow: none;
        color: @linkColor;
        &:hover {
            background: none;
            text-decoration: underline
        }
    }

    color: @black;
    text-shadow: none;

    p, h1, h2, h3, h4, h5, h6 { padding: 0px 15px; }
}*/

/*
    ----------------------------
    Dashboard view
    ----------------------------
*/
.dashboard-view {
    h1.title {
        margin-bottom: 15px;
    }
    h1.performance {
        margin-top: 1em;
    }
}

.dashboard-view table.status {
    width: 100%;
    td {
        width: 33%;
        vertical-align: top;
        padding: 5px 10px 15px 0px;
    }
    td.no-problems-detected h3 {
        border-left: solid 5px green;
        padding-left: 5px;
    }
    td.problems-detected h3 {
        border-left: solid 5px red;
        padding-left: 5px;
    }
    p {
        padding: 0;
        margin: 0;
    }
    p.message, p.details {
        text-transform: uppercase;
        color: @gray;
        font-size: 0.75em;
    }
}


/*
    ----------------------------
    List views
    ----------------------------
*/

.actions-bar {
    border: @panel_border;
    .border-radius(0 0 @border_radius @border_radius);
    padding: 12px;
    margin: 10px 0;
    .panel-gradient;
}

.namespace-list, .server-list .machine-list {
    border: @panel_border;
    .border-radius(0 0 @border_radius @border_radius);
    margin-top: 10px;
    margin-bottom: 20px;

    table {
        margin-bottom: 0;
        border: 0;
        td + td { border-left: 0; }
        td { vertical-align: middle; }

        tr.element {
            &.selected td {
                background: @selected_color;
            }
            &.last-child td {
                border-bottom: 0;
            }

            input[type="checkbox"] {
                margin-left: 10px; 
            }
        }

        .details {
            padding: 5px;

            h3.name {
                line-height: 1em;
                margin-bottom: 0.3em;
                font-weight: bold;
                font-size: 1.2em;
                color: @grayDark;
            }
        }
    }
}

.server-list {
    margin-top: 20px;

    .label.element-type {
        text-transform: uppercase;
        font-size: 10px;
        margin-right: 15px;
        display: inline-block;
        margin-top: -3px;
    }


    .datacenter.details p, .machine.details p {
        font-size: 11px;
        text-transform: uppercase;
        margin-bottom: 0;
    }

    .datacenter.details p.status .label {
        vertical-align: text-top;
        font-size: 10px;
        margin-right: 5px;
    }

    .machine.details {
        div.toolbar {
            float: right;
            margin-top: -25px;
            text-align: right;
        }
        p.status {
            .label {
                vertical-align: text-top;
                font-size: 10px;
            }
        }
        p.actions {
            text-transform: none;
            font-size: 13px;
        }
    }

    .header {
        cursor: pointer;
    }

    .arrow {
        width: 16px;
        height: 16px;
        float: left;
        &.collapsed {
            background: url('/images/mini_right-arrow.png') no-repeat center top;
        }
        &.expanded {
            background: url('/images/mini_down-arrow.png') no-repeat center top;
            margin-top: 3px;
        }
    }

    .divider {
       margin-top: 10px;
       margin-bottom: 20px;
       border-bottom: 2px solid #DDD;
       margin-left: 28px;
    }

    h3.datacenter.name { 
        line-height: 1em;
        margin-left: 28px;
    }

    .datacenter.actions {
        text-align: right;
        padding-right: 13px;
    }

    .datacenter.details {
        margin-top: 10px;
        margin-left: 28px;
    }
    .machine-list {
        margin-left: 28px;
    }
}

.namespace-list {
    margin-top: 20px;

    div.toolbar {
        float: right;
        margin-top: -8em;
    }
    span.protocol {
        background: @gray;
        color: @white;
        font-size: 0.8em;
        padding: 0.4em;
        text-transform: uppercase;
        font-weight: bold;

        &.riak { background-color: @riak_color; }
        &.memcached {  background-color: @memcached_color;  }
    }
}

.modal {
    display: none;
    .custom_btn_placeholder {
        display: inline-block;
    }
    form {
        input { height: 28px; }
        margin-bottom: 0 !important;
        span.help-inline { padding-left: 15px; }
    }

    .user-tip {
        color: grey;
    }
}

.alert .name {
    font-weight: bold;
}

/*
    ----------------------------
    Generic element view
    ----------------------------
*/
.namespace-view, .datacenter-view, .machine-view {
    .two-panel-section {
        border-bottom: thin solid #CCC;
        padding-bottom: 10px;
        margin-bottom: 10px;
        width: 100%;
        .panel-left {
            float: left;
            width: 50%;
        }
        .panel-right {
            float: left;
        }
        .two-panel-clear {
            clear: both;
        }
        .section {
            border-bottom: none;
            padding-bottom: 0;
            margin-bottom: 0;
        }
    }
    
    .section {
        border-bottom: thin solid #CCC;
        padding-bottom: 10px;
        margin-bottom: 10px;
    }

    h3.title {
        margin-bottom: 10px;
    }

    h1 {
        margin-bottom: 10px;
        display: inline-block;
    }

    .recent-log-entry {
        margin-bottom: 10px;
        padding-bottom: 10px;
        border-bottom: thin solid @grayLighter;

        p { margin-bottom: 0; }

        .entry-metadata {
            p {
                text-transform: uppercase;
                color: @gray;
                text-align: left;
                font-size: 0.75em;
                margin-bottom: 0;
            }
            margin-bottom: 6px;
        }

        p.level {
            text-transform: uppercase;
            color: @gray;
            font-size: 0.75em;
            float: left;
        }

        p.message {
            margin-left: 50px;
            a.json {
                text-transform: uppercase;
                font-size: 0.75em;
                color: @gray;
                border-bottom: thin dotted @gray;
                &:hover {
                    border-bottom: none;
                }
            }
        }
    }
}

/*
    ----------------------------
    Namespace view
    ----------------------------
*/

.namespace-view {
    table.datacenters {
        margin-bottom: 15px;
        td {
            border-bottom: thin solid @grayLighter;
            padding: 10px 0;
            span.master-status, span.replica-status {
                display: block;
            }
        } 
    }

   table.shards {
        margin-bottom: 15px;
        td {
            border-bottom: thin solid @grayLighter;
            padding: 10px 0;
            &.name {
                width: 15%;
            }
        } 
        div.progress {
            width: 200px;
        }
    }

    /* Override Bootstrap */
    table {
        border: none;
        th, td {
            border-top: none;
            border-bottom: thin solid @grayLighter;
            margin: 0;
            padding: 0;
        }
    }
    /* End override */
}

/*
    ----------------------------
    Machine view
    ----------------------------
*/

.machine-view {
}

/*
    -----------------------------------------------
    ModifyReplicasModal: replication for namespaces
    -----------------------------------------------
*/

.modal.modify-replicas {
    .modal-body {
        padding-top: 10px;
    }

    .existing-secondaries {
        .border-radius(2px);
        background-color: #F0F2EB;
        border: thin solid #B9D7D9;
        padding: 10px;
        margin-top: 10px;
        margin-bottom: 20px;
        p { margin-bottom: 0; }
    }

    .replica-attributes {
        .info {
            float: right;
            width: 200px;
            margin-left: 20px;
            .border-radius(4px);
            background-color: #E5EDB8;
            border: thin solid #B7D1A3;
            padding: 14px;

            p:last-child {
                margin-bottom: 0;
            }
        }
    }

    hr {
       margin-top: 0;
       margin-bottom: 10px;
       border-top: thin solid @grayLighter;
       width: 55%;
    }
    form {
        .xlarge {
            width: 45%;
            padding-right: 20px;    
        }
        tr.last {
            td { padding-bottom: 0; }
            .clearfix { margin-bottom: 0; }
        }
        label {
            padding-top: 0px;
            text-align: left;
            p {
                margin-bottom: 6px;
            }
        }
        p.current, p.max {
            font-size: 12px;
            line-height: 24px;
            color: @gray;
        }
        p.current {
            margin-bottom: 0;
        }
    }

    .replica-plan {
        h5.replicas {
            line-height: 1em;
            margin-bottom: 10px;
        }

        td {
            border-bottom: thin solid @grayLighter;
            padding: 10px 0;
            &.name {
                width: 15%;
                h4 { line-height: 16px; }
            }
            &.machines {
                line-height: 36px;
                p.delta {
                    font-size: 15px;
                }
                p.existing {
                    font-size: 12px;
                    line-height: 18px;
                    color: @gray;
                }
            }
            &.change-machines {
                text-align: right;
                line-height: 36px;
            }
        }

        table.shards { margin-bottom: 10px; }
    }

    /* Override Bootstrap */
    fieldset {
        padding-top: 0px;
        padding-bottom: 0;
        margin-bottom: 0;

        label { padding-right: 20px; }
        .input { margin-left: 0; }
    }

    table {
        border: none;
        margin-bottom: 0;

        td {
            padding: 0;
            border: none;
            padding-bottom: 5px;
        }
    }
    /* End override */
}

/*
    -----------------------------------------------
    ModifyShardsModal: replication for namespaces
    -----------------------------------------------
*/

.modal.remove-namespace-dialog ul {
    border: none;
}

/*
    -----------------------------------------------
    ModifyShardsModal: replication for namespaces
    -----------------------------------------------
*/

.modify-shards {
    h1 {
       margin-bottom: 10px;
    }

    form {
        label {
            padding-top: 0px;
            text-align: left;
            p {
                margin-bottom: 6px;
            }
        }
    }

    .sharding-scheme {
        p.suggest_shards_pathway {
            margin-top: 1em;
            margin-bottom: 0;
            font-size: large;
        }

        .shard-suggester {
            label {
               display: inline;
            }
            input {
                height: 1.2em;
                width: 3em;
                margin-bottom: 0;
            }
            p.current, p.max {
                font-size: 12px;
                line-height: 24px;
                color: @gray;
            }
            .shard_suggest_elements {
                margin-top: 0.5em;
            }

        }
    }

    .sharding-scheme table.shards {
        border-top: thin solid @grayLighter;
    }
    .sharding-scheme table.shards, .sharding-plan table.datacenters {
        td {
            border-bottom: thin solid @grayLighter;
            padding: 15px 0 10px;
            &.name {
                h4 { line-height: 16px; }
            }
        }
    }

    .shard-suggester {
        margin-top: 1em;
    }
    .action, .shard-suggester, .unsaved-settings-warning {
       margin-right: 1em;
        .border-radius(4px);
        background-color: #F0F2EB;
        border: thin solid #B9D7D9;
        padding: 5px 14px;

        p { margin-bottom: 0; }
        label {
            width: auto;
            p { line-height: 28px; }
        }
        input { margin-left: 15px; }
        .btn {
            margin-left: 10px;
        }
    }
    .unsaved-settings-warning {
        margin-bottom: 1em;
        margin-right: 0;
    }

    .sharding-plan table.datacenters {
        td {
            &.machines {
                line-height: 36px;
                p.delta {
                    font-size: 15px;
                }
                p.existing {
                    font-size: 12px;
                    line-height: 18px;
                    color: @gray;
                }
            }
            &.change-machines {
                text-align: right;
                line-height: 36px;
            }
            .existing-replicas {
                .border-radius(2px);
                background-color: #F0F2EB;
                border: thin solid #B9D7D9;
                padding: 10px;
                margin-top: 10px;
                margin-bottom: 20px;
                p { margin-bottom: 0; }
            }
        }
    }

    .btn-footer {
        margin-top: 1em;
        text-align: right;
    }

    /* Override Bootstrap */

    table {
        border: none;
        margin-bottom: 0;

        td {
            padding: 0;
            border: none;
            padding-bottom: 5px;
        }
    }
    /* End override */

    table.shard-update-table {
        border-collapse: collapse;
        td {
            border: 1px solid gray;
        }
        td.dummy {
            border: none;
        }
    }
}

/*
    --------------------
    Visualization styles
    --------------------
*/
#ops_plot_container {
    position: relative;
    .chart {
        border-bottom: solid 1px black;
        overflow: hidden;
        display: inline-block;
        .title, {
            display: none;
        }
        .value {
            display: none;
        }
        canvas {
            display: block;
        }
        border-top: solid 1px black;
        border-left: solid 1px black;
        border-right: solid 1px black;
    }

    .chart, .haxis, .hgrid, .line {
        margin-left: 34px;
    }

    .haxis, .vaxis, .hgrid, .vgrid {
        font: 10px sans-serif;
        line {
            stroke: #000;
            shape-rendering: crispEdges;
        }
    }
    .haxis text, {
        -webkit-transition: fill-opacity 250ms linear;
    }
    
    .haxis {
        margin-top: -9px;
    }

    .hgrid {
        height: 200px;
        position: absolute;
        top: -3px;
        left: 0;
        line {
            opacity: .2;
        }
    }

    .vaxis {
        margin-top: -228px;
    }

    .vgrid {
        position: absolute;
        top: 0;
        left: 0px;
        line {
            opacity: .2;
        }
    }

    .line {
       background: #000;
       opacity: .2;
       z-index: 2;
    }

    .ops_plot_legend {
        width: 370px;
    }
    .legend {
        .color {
            display: inline-block;
            width: 10px;
            height: 10px;
        }
        .reads .color { background-color: #729E51; }
        .writes .color { background-color: #983434; }
        text-transform: uppercase;
        color: @gray;
        font-size: 0.7em;
    }
    .legend-table {
        width: 370px;
        td.reads {
            width: 185px;
        }
        td.reads .color {
            margin-left: 85px;
        }
        td.writes {
            text-align: left;
        }
    }
}

.performance_panel {
    .panel-left {
        float: left;
        width: 50%;
    }
    .panel-right {
        float: left;
    }
    .two-panel-clear {
        clear: both;
    }
}

.stats_panel {
    margin-left: 1em;
    text-transform: uppercase;
    color: @gray;
    font-size: 0.85em;
    line-height: 2em;
    td.minichart {
        width: 75px;
        padding-left: 5px;
        padding-right: 5px;
    }
}
